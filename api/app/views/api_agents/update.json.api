user = @item.user
response_hash = {
  available: @item.available,
  occasional: @item.occasional,
  id: @item.user_id,
  ticket_scope: @item.ticket_permission,
  signature: @item.signature_html,
  group_ids: @item.group_ids,
  role_ids:  user.role_ids,
  skill_ids: user.skill_ids,
  created_at: @item.created_at.try(:utc),
  updated_at: @item.updated_at.try(:utc),
  last_active_at: @item.last_active_at.try(:utc),
  available_since: @item.active_since.try(:utc),
  type: Account.current.agent_types_from_cache.find { |type| type.agent_type_id == @item.agent_type }.name,
  contact: {
    active: user.active,
    email: user.email,
    job_title: user.job_title,
    language: user.language,
    last_login_at: user.last_login_at.try(:utc),
    mobile: user.mobile,
    name: user.name,
    phone: user.phone,
    time_zone: user.time_zone,
    created_at: user.created_at.try(:utc),
    updated_at: user.updated_at.try(:utc)
  }
}
if Account.current.freshcaller_enabled?
  response_hash[:freshcaller_agent] = @item.freshcaller_agent.present? ? @item.freshcaller_agent.try(:fc_enabled) : false
end
response_hash[:freshchat_agent] = @item.agent_freshchat_enabled? if Account.current.omni_chat_agent_enabled?
response_hash[:agent_level_id] = @item.scoreboard_level_id if Account.current.gamification_enabled? && Account.current.gamification_enable_enabled?
response_hash[:contact][:avatar] = AttachmentDecorator.new(user.avatar).to_hash if user.avatar.present?
response_hash[:contribution_group_ids] = @item.agent_contribution_group_ids if Account.current.advanced_ticket_scopes_enabled? && !@item.field_agent_check_using_cache?
response_hash.to_json
