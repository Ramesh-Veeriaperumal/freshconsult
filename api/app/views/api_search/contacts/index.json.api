results = @items.map do |item|
  response_hash = {
    active: item.active,
    address: item.address,
    company_id: item.company_id,
    custom_fields: item.custom_fields,
    description: item.description,
    email: item.email,
    other_emails: item.other_emails,
    id: item.id,
    job_title: item.job_title,
    language: item.language,
    mobile: item.mobile,
    name: item.name,
    phone: item.phone,
    time_zone: item.time_zone,
    twitter_id: item.twitter_id,
    facebook_id: item.fb_profile_id,
    external_id: item.external_id,
    created_at: item.created_at.try(:utc),
    updated_at: item.updated_at.try(:utc)
  }
  response_hash[:deleted] = true if item.deleted
  response_hash[:unique_external_id] = item.unique_external_id if item.unique_contact_identifier_enabled?
  response_hash.merge!(item.company_info_for_search)
  response_hash
end

{
  results: results,
  total: @items.total_entries
}.to_json
