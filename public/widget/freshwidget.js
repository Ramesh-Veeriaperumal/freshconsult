(function(){var o=window.document,u={1:"top",2:"right",3:"bottom",4:"left",top:"top",right:"right",bottom:"bottom",left:"left"},i=/^[a-zA-Z]+:\/\//,g=2,f={widgetId:0,buttonText:"Support",buttonBg:"#7eb600",buttonColor:"white",backgroundImage:null,alignment:"left",offset:"35%",url:"http://support.freshdesk.com",assetUrl:"https://s3.amazonaws.com/assets.freshdesk.com/widget",queryString:""},l,r,C,k,c,e,w,t;container=null;function A(F){try{return F()}catch(G){if(window.console&&window.console.log&&window.console.log.apply){window.console.log("Freshdesk Error: ",G)}}}var b={Version:function(){var F=999;if(navigator.appVersion.indexOf("MSIE")!=-1){F=parseFloat(navigator.appVersion.split("MSIE")[1])}return F}};function p(F){if(F&&!(i.test(F))){return o.location.protocol+"//"+F}else{return F}}function v(F){var G=o.createElement("link");G.setAttribute("rel","stylesheet");G.setAttribute("type","text/css");G.setAttribute("href",F);if(typeof G!="undefined"){o.getElementsByTagName("head")[0].appendChild(G)}}function z(F){var G=o.createElement("script");G.setAttribute("type","text/javascript");G.setAttribute("src",F);if(typeof G!="undefined"){o.getElementsByTagName("head")[0].appendChild(G)}}function E(G,F,H){if(G&&G.addEventListener){G.addEventListener(F,H,false)}else{if(G&&G.attachEvent){G.attachEvent("on"+F,H)}}}function x(F){var G;for(G in F){if(f.hasOwnProperty(G)){if(G==="url"||G==="assetUrl"){f[G]=p(F[G])}else{f[G]=F[G]}}}}function D(H){url=H.src;var G=window.navigator&&window.navigator.appVersion.split("MSIE");var F=parseFloat(G[1]);if((F>=5.5)&&(F<7)&&(o.body.filters)){H.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+url+"', sizingMethod='crop')"}else{H.style.backgroundImage="url("+url+")"}return H}function q(){if(c==null){class_name=u[f.alignment]||"left";c=o.createElement("div");c.setAttribute("id","freshwidget-button");c.style.display="none";c.className="freshwidget-button fd-btn-"+class_name;if(b.Version()<=10){c.className+=" ie"+b.Version()}link=o.createElement("a");link.setAttribute("href","javascript:void(0)");text=null;proxyLink=o.createElement("a");proxyLink.setAttribute("href","javascript:void(0)");if(f.backgroundImage==null||f.backgroundImage==""){link.className="freshwidget-theme";link.style.color=f.buttonColor;link.style.backgroundColor=f.buttonBg;link.style.borderColor=f.buttonColor;proxyLink.className="proxy-link";text=o.createTextNode(f.buttonText)}else{link.className="freshwidget-customimage";text=o.createElement("img");text.src=f.backgroundImage;text=D(text)}if(class_name=="top"||class_name=="bottom"){c.style.left=f.offset}else{c.style.top=f.offset}o.body.insertBefore(c,o.body.childNodes[0]);c.appendChild(link);link.appendChild(text);if((f.backgroundImage==null||f.backgroundImage=="")&&(b.Version()<=10)){c.appendChild(proxyLink);E(proxyLink,"click",function(){window.FreshWidget.show()});proxyLink.style.height=link.offsetHeight+"px";proxyLink.style.width=link.offsetWidth+"px"}E(link,"click",function(){window.FreshWidget.show()})}}function a(){if(c!=null){o.body.removeChild(c);c=null}}function h(){if(container==null){container=o.createElement("div");container.className="freshwidget-container";container.id="FreshWidget";container.style.display="none";o.body.insertBefore(container,o.body.childNodes[0]);container.innerHTML='<div class="widget-ovelay" id="freshwidget-overlay">&nbsp;</div><div class="freshwidget-dialog" id="freshwidget-dialog"> <img id="freshwidget-close" class="widget-close" src="'+f.assetUrl+"/widget_close.png?ver="+g+'" /> <div class="frame-container"> 	<iframe id="freshwidget-frame" src="about:blank" frameborder="0" scrolling="auto" allowTransparency="true"/> </div>';"</div>";container=o.getElementById("FreshWidget");e=o.getElementById("freshwidget-close");e=D(e);t=o.getElementById("freshwidget-dialog");k=o.getElementById("freshwidget-frame");w=o.getElementById("freshwidget-overlay");t.appendChild(k);B();E(e,"click",function(){window.FreshWidget.close()});E(w,"click",function(){window.FreshWidget.close()});E(k,"load",function(){if(!l&&k.src.indexOf("/widgets/feedback_widget/new?")!=-1){l=true}})}}function B(){k.src=f.url+"/loading.html?ver="+g}function s(){k.src=f.url+"/widgets/feedback_widget/new?"+f.queryString}function j(){scroll(0,0);container.style.display="block";if(b.Version()>8){html2canvas([o.body],{ignoreIds:"FreshWidget|freshwidget-button",proxy:false,onrendered:function(G){var F=G.toDataURL();var H=F;sendMessage=setInterval(function(){if(l){o.getElementById("freshwidget-frame").contentWindow.postMessage(H,"*");clearInterval(sendMessage)}else{console.log("waiting for iframe to load")}},500)}})}if(!l){s()}}function m(){container.style.display="none";s()}function d(F){x(F);if(b.Version()>8&&(typeof html2canvas==="undefined")){z(f.assetUrl+"/html2canvas.js?ver="+g)}E(window,"load",function(){q();h()});v(f.assetUrl+"/freshwidget.css?ver="+g)}function n(F){x(F);a();q()}var y={init:function(F,G){A(function(){return d(G)})},show:function(){A(function(){return j()})},close:function(){A(function(){return m()})},iframe:function(){return k},update:function(F){A(function(){return n(F)})}};if(!window.FreshWidget){window.FreshWidget=y}})();