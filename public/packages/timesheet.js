var TicketTimesheet=Class.create();TicketTimesheet.prototype={initialize:function(b,a){this.editid=null;new PeriodicalExecuter(function(c){jQuery("div.time_running .time").each(function(){seconds=jQuery(this).data("runningTime");timeout=10-seconds%10;jQuery(this).html(time_in_hhmm(seconds)).data("runningTime",seconds+timeout)});totalTime("#timesheetlist .time","#timeentry_timer_total")},10);jQuery("#timesheetlist div.timeentry").livequery(this.timeCount,this.timeCount);jQuery("a.submit").live("click",function(c){c.preventDefault();if(jQuery("#timeentry_apps_add .app-logo input[type=checkbox]").filter(":checked").parentsUntil("#time_integration").filter(".still_loading").length){return false}jQuery(this).button("loading");if(!jQuery(this).hasClass("disabled")){jQuery(this).parents("form").submit()}});jQuery("#add_new_time_entry #time_entry_hours").bind("keyup",function(c){if(jQuery(this).val().strip()!=""){jQuery("#add_new_time_entry #new_time_submit").html("Save")}else{jQuery("#add_new_time_entry #new_time_submit").html("Start timer")}});if(jQuery("#timesheetlist .timeentry").size()==0||jQuery("#TimeSheetButton").hasClass("active")){jQuery("#timeentry_add").addClass("active_edit")}jQuery("#TimeSheetButton").click(function(c){jQuery("#TimesheetTab").click();timesheet.clearEdit();timesheet.editCompelete("add");jQuery("#add_new_time_entry").get(0).reset();jQuery("#new_time_submit").button("reset").html("Start timer");if(typeof harvestWidget!="undefined"&&harvestWidget){harvestWidget.resetIntegratedResourceIds()}if(typeof freshbooksWidget!="undefined"&&freshbooksWidget){freshbooksWidget.resetIntegratedResourceIds()}if(typeof workflowMaxWidget!="undefined"&&workflowMaxWidget){workflowMaxWidget.resetIntegratedResourceIds()}})},editCompelete:function(b,a){this.clearEdit();if(!a){jQuery("#timeentry_"+b).addClass("active_edit")}jQuery("#time_integration").detach().appendTo("#timeentry_apps_"+b)},clearEdit:function(){jQuery("#Timesheet .active_edit").removeClass("active_edit")},timeCount:function(){count=jQuery("#timesheetlist div.timeentry").size();jQuery("#TimesheetCount").html(count);jQuery("#TimesheetCount, #timesheettotal").toggle(count!=0);jQuery("#timesheetlist div.list-noinfo").hide();totalTime("#timesheetlist .time","#timeentry_timer_total")}};var timesheet=new TicketTimesheet();jQuery("#time_integration .app-logo").live("click",function(a){if(!jQuery(a.target).is("input[type=checkbox]")){var b=jQuery(this).children("input[type=checkbox]");b.prop("checked",!b.prop("checked"))}});