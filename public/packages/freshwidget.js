(function(){var n=window.document,t={1:"top",2:"right",3:"bottom",4:"left",top:"top",right:"right",bottom:"bottom",left:"left"},h=/^[a-zA-Z]+:\/\//,f={widgetId:0,buttonText:"Support",buttonBg:"#7eb600",buttonColor:"white",backgroundImage:null,alignment:"left",offset:"35%",url:"http://support.freshdesk.com",assetUrl:"https://s3.amazonaws.com/assets.freshdesk.com/widget",queryString:""},k,q,B,j,c,e,v,s;container=null;function z(E){try{return E()}catch(F){if(window.console&&window.console.log&&window.console.log.apply){window.console.log("Freshdesk Error: ",F)}}}var b={Version:function(){var E=999;if(navigator.appVersion.indexOf("MSIE")!=-1){E=parseFloat(navigator.appVersion.split("MSIE")[1])}return E}};function o(E){if(E&&!(h.test(E))){return n.location.protocol+"//"+E}else{return E}}function u(E){var F=n.createElement("link");F.setAttribute("rel","stylesheet");F.setAttribute("type","text/css");F.setAttribute("href",E);if(typeof F!="undefined"){n.getElementsByTagName("head")[0].appendChild(F)}}function y(E){var F=n.createElement("script");F.setAttribute("type","text/javascript");F.setAttribute("src",E);if(typeof F!="undefined"){n.getElementsByTagName("head")[0].appendChild(F)}}function D(F,E,G){if(F&&F.addEventListener){F.addEventListener(E,G,false)}else{if(F&&F.attachEvent){F.attachEvent("on"+E,G)}}}function w(E){var F;for(F in E){if(f.hasOwnProperty(F)){if(F==="url"||F==="assetUrl"){f[F]=o(E[F])}else{f[F]=E[F]}}}}function C(G){url=G.src;var F=window.navigator&&window.navigator.appVersion.split("MSIE");var E=parseFloat(F[1]);if((E>=5.5)&&(E<7)&&(n.body.filters)){G.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+url+"', sizingMethod='crop')"}else{G.style.backgroundImage="url("+url+")"}return G}function p(){if(c==null){class_name=t[f.alignment]||"left";c=n.createElement("div");c.setAttribute("id","freshwidget-button");c.style.display="none";c.className="freshwidget-button "+class_name;if(b.Version()<=10){c.className+=" ie"+b.Version()}link=n.createElement("a");link.setAttribute("href","javascript:void(0)");text=null;proxyLink=n.createElement("a");proxyLink.setAttribute("href","javascript:void(0)");if(f.backgroundImage==null||f.backgroundImage==""){link.className="freshwidget-theme";link.style.color=f.buttonColor;link.style.backgroundColor=f.buttonBg;link.style.borderColor=f.buttonColor;proxyLink.className="proxy-link";text=n.createTextNode(f.buttonText)}else{link.className="freshwidget-customimage";text=n.createElement("img");text.src=f.backgroundImage;text=C(text)}if(class_name=="top"||class_name=="bottom"){c.style.left=f.offset}else{c.style.top=f.offset}n.body.insertBefore(c,n.body.childNodes[0]);c.appendChild(link);link.appendChild(text);if((f.backgroundImage==null||f.backgroundImage=="")&&(b.Version()<=10)){c.appendChild(proxyLink);D(proxyLink,"click",function(){window.FreshWidget.show()});proxyLink.style.height=link.offsetHeight+"px";proxyLink.style.width=link.offsetWidth+"px"}D(link,"click",function(){window.FreshWidget.show()})}}function a(){if(c!=null){n.body.removeChild(c);c=null}}function g(){if(container==null){container=n.createElement("div");container.className="freshwidget-container";container.id="FreshWidget";container.style.display="none";n.body.insertBefore(container,n.body.childNodes[0]);container.innerHTML='<div class="widget-ovelay" id="freshwidget-overlay">&nbsp;</div><div class="freshwidget-dialog" id="freshwidget-dialog"> <img id="freshwidget-close" class="widget-close" src="'+f.assetUrl+'/widget_close.png" /> <div class="frame-container"> 	<iframe id="freshwidget-frame" src="about:blank" frameborder="0" scrolling="auto" allowTransparency="true"/> </div>';"</div>";container=n.getElementById("FreshWidget");e=n.getElementById("freshwidget-close");e=C(e);s=n.getElementById("freshwidget-dialog");j=n.getElementById("freshwidget-frame");v=n.getElementById("freshwidget-overlay");s.appendChild(j);A();D(e,"click",function(){window.FreshWidget.close()});D(v,"click",function(){window.FreshWidget.close()});D(j,"load",function(){if(!k&&j.src.indexOf("/widgets/feedback_widget/new?")!=-1){k=true}})}}function A(){j.src=f.url+"/loading.html"}function r(){j.src=f.url+"/widgets/feedback_widget/new?"+f.queryString}function i(){scroll(0,0);container.style.display="block";if(b.Version()>8){html2canvas([n.body],{ignoreIds:"FreshWidget|freshwidget-button",proxy:false,onrendered:function(F){var E=F.toDataURL();var G=E;sendMessage=setInterval(function(){if(k){n.getElementById("freshwidget-frame").contentWindow.postMessage(G,"*");clearInterval(sendMessage)}else{console.log("waiting for iframe to load")}},500)}})}if(!k){r()}}function l(){container.style.display="none";r()}function d(E){w(E);if(b.Version()>8&&(typeof html2canvas==="undefined")){y(f.assetUrl+"/html2canvas.js")}D(window,"load",function(){p();g()});u(f.assetUrl+"/freshwidget.css")}function m(E){w(E);a();p()}var x={init:function(E,F){z(function(){return d(F)})},show:function(){z(function(){return i()})},close:function(){z(function(){return l()})},iframe:function(){return j},update:function(E){z(function(){return m(E)})}};if(!window.FreshWidget){window.FreshWidget=x}})();