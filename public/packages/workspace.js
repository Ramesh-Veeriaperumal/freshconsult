!function(c){var a;c(document).ready(function(){c.support.transition=(function(){var f=document.body||document.documentElement,g=f.style,e=g.transition!==undefined||g.WebkitTransition!==undefined||g.MozTransition!==undefined||g.MsTransition!==undefined||g.OTransition!==undefined;return e})();if(c.support.transition){a="TransitionEnd";if(c.browser.webkit){a="webkitTransitionEnd"}else{if(c.browser.mozilla){a="transitionend"}else{if(c.browser.opera){a="oTransitionEnd"}}}}});var d=function(f,e){this.$element=c(f);this.options=e;this.enabled=true;this.fixTitle()};d.prototype={show:function(){var k,f,j,e,h,g;if(this.hasContent()&&this.enabled){h=this.tip();this.setContent();if(this.options.animate){h.addClass("fade")}h.css({top:0,left:0,display:"block"}).prependTo(document.body);k=c.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});f=h[0].offsetWidth;j=h[0].offsetHeight;e=b(this.options.placement,this,[h[0],this.$element[0]]);switch(e){case"below":g={top:k.top+k.height+this.options.offset,left:k.left+k.width/2-f/2};break;case"above":g={top:k.top-j-this.options.offset,left:k.left+k.width/2-f/2};break;case"left":g={top:k.top+k.height/2-j/2,left:k.left-f-this.options.offset};break;case"right":g={top:k.top+k.height/2-j/2,left:k.left+k.width+this.options.offset};break;case"topRight":g={top:k.top-(k.height+10),left:k.left+k.width+this.options.offset};break}h.css(g).addClass(e).addClass("in")}},setContent:function(){var e=this.tip();e.find(".twipsy-inner")[this.options.html?"html":"text"](this.getTitle());e[0].className="twipsy";this.$element.attr("twipsy-content-set",true)},hide:function(){var e=this,f=this.tip();f.removeClass("in");f.css({display:"none"})},fixTitle:function(){var e=this.$element;if(e.attr("title")||typeof(e.attr("data-original-title"))!="string"){e.attr("data-original-title",e.attr("title")||"").removeAttr("title")}},hasContent:function(){return this.getTitle()},getTitle:function(){var g,e=this.$element,f=this.options;this.fixTitle();if(typeof f.title=="string"){g=e.attr(f.title=="title"?"data-original-title":f.title)}else{if(typeof f.title=="function"){g=f.title.call(e[0])}}g=(""+g).replace(/(^\s*|\s*$)/,"");return g||f.fallback},tip:function(){return this.$tip=this.$tip||c('<div class="twipsy" />').html(this.options.template)},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}};function b(g,e,f){return typeof g=="function"?g.apply(e,f):g}c.fn.twipsy=function(e){c.fn.twipsy.initWith.call(this,e,d,"twipsy");return this};c.fn.twipsy.initWith=function(o,k,e){var n,m,h,g;if(o===true){return this.data(e)}else{if(typeof o=="string"){n=this.data(e);if(n){n[o]()}return this}}o=c.extend({},c.fn[e].defaults,o);function f(q){var p=c.data(q,e);if(!p){p=new k(q,c.fn.twipsy.elementOptions(q,o));c.data(q,e,p)}return p}function j(){var p=f(this);p.hoverState="in";if(o.delayIn==0){p.show()}else{p.fixTitle();setTimeout(function(){if(p.hoverState=="in"){p.show()}},o.delayIn)}}function l(){var p=f(this);p.hoverState="out";if(o.delayOut==0){p.hide()}else{setTimeout(function(){if(p.hoverState=="out"){p.hide()}},o.delayOut)}}if(!o.live){this.each(function(){f(this)})}if(o.trigger!="manual"){m=o.live?"live":"bind";h=o.trigger=="hover"?"mouseenter":"focus";g=o.trigger=="hover"?"mouseleave":"blur";this[m](h,j)[m](g,l)}return this};c.fn.twipsy.Twipsy=d;c.fn.twipsy.defaults={animate:true,delayIn:0,delayOut:0,fallback:"",placement:"above",html:false,live:false,offset:0,title:"title",trigger:"hover",template:'<div class="twipsy-arrow"></div><div class="twipsy-inner"></div>'};c.fn.twipsy.rejectAttrOptions=["title"];c.fn.twipsy.elementOptions=function(j,f){var h=c(j).data(),e=c.fn.twipsy.rejectAttrOptions,g=e.length;while(g--){delete h[e[g]]}return c.extend({},f,h)}}(window.jQuery||window.ender);!function(c){function b(e,d){d.find("> .active").removeClass("active").find("> .dropdown-menu > .active").removeClass("active");e.addClass("active");if(e.parent(".dropdown-menu")){e.closest("li.dropdown").addClass("active")}}function a(j){var h=c(this),f=h.closest("ul:not(.dropdown-menu)"),d=h.attr("href"),g,k;if(/^#\w+/.test(d)){j.preventDefault();window.location.hash=d;if(h.parent("li").hasClass("active")){return}if(h.data("remoteLoad")){c(d).load(h.data("remoteLoad"));h.data("remoteLoad",false)}g=f.find(".active a").last()[0];k=c(/([^\/]+$)/i.exec(d).last());b(h.parent("li"),f);b(k,k.parent());h.trigger({type:"change",relatedTarget:g})}}c.fn.tabs=c.fn.pills=function(d){return this.each(function(){c(this).delegate(d||".tabs li > a, .pills > li > a","click",a)})};c(document).ready(function(){c("body").tabs("ul[data-tabs] li > a, ul[data-pills] > li > a")})}(window.jQuery||window.ender);!function(b){var a=function(d,c){this.$element=b(d);this.options=c;this.enabled=true;this.fixTitle()};a.prototype=b.extend({},b.fn.twipsy.Twipsy.prototype,{setContent:function(){if(this.options.reloadContent||!this.$element.attr("twipsy-content-set")){var c=this.tip();c.find(".title")[this.options.html?"html":"text"](this.getTitle());c.find(".content > *")[this.options.html?"html":"text"](this.getContent());c[0].className="popover";this.$element.attr("twipsy-content-set",true)}},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var d,c=this.$element,e=this.options;if(typeof this.options.content=="string"){d=c.attr(this.options.content)}else{if(typeof this.options.content=="function"){d=this.options.content.call(this.$element[0])}}return d},tip:function(){if(!this.$tip){this.$tip=b('<div class="popover" />').html(this.options.template)}return this.$tip}});b.fn.popover=function(c){if(typeof c=="object"){c=b.extend({},b.fn.popover.defaults,c)}b.fn.twipsy.initWith.call(this,c,a,"popover");return this};b.fn.popover.defaults=b.extend({},b.fn.twipsy.defaults,{placement:"right",content:"data-content",reloadContent:true,template:'<div class="arrow"></div><div class="inner"><h3 class="title"></h3><div class="content"><p></p></div></div>'});b.fn.twipsy.rejectAttrOptions.push("content")}(window.jQuery||window.ender);(function(a){a.fn.showAsDynamicMenu=function(){this.each(function(q,s){a(s).bind("click",function(t){t.preventDefault();t.stopPropagation();var u;if(a(s).data("options-fetched")!=true){u=f();var w=p(u);w.data("parent",a(s));w.insertAfter(a(s));a(s).data("menuid",u);if(typeof(a(s).data("options-url"))!="undefined"&&a(s).data("options-fetched")!=""){n(s,u)}else{d(s,u)}}else{u=a(s).data("menuid")}var v=a("#menu_"+u);v.show().css("visibility","visible");a(document).data({"active-menu":true,"active-menu-element":v,"active-menu-parent":s});a(s).addClass("selected");l(u);g(u);k(u)})});var f=function(){if(typeof(a(document).data("dynamic-menu-count"))=="undefined"){a(document).data("dynamic-menu-count",0)}var q=a(document).data("dynamic-menu-count")+1;a(document).data("dynamic-menu-count",q);return q};var p=function(q){return a("<div>").attr("id","menu_"+q).addClass("loading fd-ajaxmenu").html('<div class="contents"></div>')};var n=function(q,s){a.ajax({url:a(q).data("options-url"),success:function(v,w,u){var t=a(q).children(".result").first().text();m(s,v,t);a(q).data("options-fetched",true)}})};var d=function(s,t){var q=a(s).children(".result").first().text();m(t,a(a(s).data("options")).html(),q);a(s).data("options-fetched",true)};var m=function(u,t,q){var s=a("#menu_"+u).find(".contents").first();a("#menu_"+u).removeClass("loading");s.html(t);j(u,q);c(u);if(s.children().not(".seperator").length>10){a("#menu_"+u).addClass("hasSearch")}else{a("#menu_"+u).removeClass("hasSearch")}h(u)};var j=function(t,q){var s=false;a("#menu_"+t+" .contents").children().each(function(u){if(!s&&a(this).data("text")==q||a(this).text()==q){a(this).addClass("active").prepend('<span class="icon ticksymbol"></span>');s=true;k(t)}})};var g=function(q){a("#menu_"+q+" .menu_search").val("").focus()};var c=function(u){var t=a('<div class="search_container"><input class="menu_search" type="text" placeholder="Search" /> </div>');a("#menu_"+u).prepend(t);var s=a('<div class="no_results hide"> No matches found </div>');a("#menu_"+u).append(s);var q=a("#menu_"+u+" .menu_search");q.bind("keydown, keypress",function(v){if(v.keyCode==13){return false}});q.bind("keyup",function(y){switch(y.keyCode){case 40:case 38:case 13:y.preventDefault();y.stopPropagation();e(y.keyCode,u);return false;break;default:var w=q.val().trim();regex=new RegExp(w,"i");var v=a("#menu_"+u+" .contents");if(w!=""){a("#menu_"+u+" .contents .selected").removeClass("selected");a("#menu_"+u).data("currentactive","");v.find(".seperator").addClass("hide");a("#menu_"+u+" .contents").children().not(".seperator").each(function(z){if(a(this).text().search(regex)==-1){a(this).addClass("hide")}else{a(this).removeClass("hide")}});var x=a("#menu_"+u+" .contents a").not(".hide");if(x.length==0){a("#menu_"+u+" .no_results").removeClass("hide")}else{a("#menu_"+u+" .no_results").addClass("hide")}}else{a("#menu_"+u+" .no_results").addClass("hide");v.children().removeClass("hide");v.find(".seperator").removeClass("hide");b(u)}k(u);break}})};var h=function(q){a("#menu_"+q+" .contents a").live("mouseover",function(t){b(q);var u=a("#menu_"+q+" .contents a").not(".hide");var v=a(this).addClass("selected");var s=u.index(v);a("#menu_"+q).data("currentactive",v);a("#menu_"+q).data("selection_position",s)})};var e=function(s,q){switch(s){case 40:o(1,q);break;case 38:o(-1,q);break;case 13:var t=a("#menu_"+q).data("currentactive");if(a("#menu_"+q).data("currentactive")!=""){t.trigger("click")}break}};var k=function(s){b(s);var q=a("#menu_"+s+" .contents a").not(".hide");var t=a(q.get(0)).addClass("selected");a("#menu_"+s).data("currentactive",t);a("#menu_"+s).data("selection_position",0)};var l=function(q){a("#menu_"+q+" .contents .hide").removeClass("hide")};var b=function(q){var s=a("#menu_"+q).data("currentactive");a(s).removeClass("selected");a("#menu_"+q).data("selection_position",0);a("#menu_"+q).data("currentactive",undefined)};var o=function(v,t){var s=a("#menu_"+t+" .contents a").not(".hide");var u=a("#menu_"+t).data("currentactive");var q=a("#menu_"+t).data("selection_position");q=typeof(q)=="undefined"?-1:q;a(u).removeClass("selected");q=Math.min((s.size()-1),Math.max(0,q+v));u=a(s.get(q)).addClass("selected");if(v>0&&q>15){a("#menu_"+t+" .contents").get(0).scrollTop+=20}else{a("#menu_"+t+" .contents").get(0).scrollTop-=20}a("#menu_"+t).data("currentactive",u);a("#menu_"+t).data("selection_position",q)}}})(jQuery);if(typeof console==="undefined"||typeof console.log==="undefined"){console={};console.log=function(){}}function log(){var a=Array.prototype.slice.call(arguments);if(window.console&&window.console.log&&window.console.log.apply){console.log(a.join(" "))}else{}}function catchException(a,b){try{return a()}catch(c){log(b||"Freshdesk Error:",c)}}function freshdate(f){var c=["January","February","March","April","May","June","July","August","September","October","November","December"];var e=parseUTCDate(f);var a=c[e.getMonth()]+" "+e.getDate()+" "+e.getFullYear();var b=pad(e.getMinutes(),2);if(e.getHours()>12){b=(e.getHours()-12)+":"+b+" PM"}else{b=e.getHours()+":"+b+" AM"}return a+" @ "+b}function parseUTCDate(b){var a=b.match(/(\d+)/g);return new Date(a[0],a[1]-1,a[2],a[3],a[4],a[5])}function plural(b,c,a){return(b+" "+((parseInt(b)>1)?a:c))}function totalTime(a,b){total_hours=$$(a).collect(function(c){return jQuery(c).data("runningTime")}).inject(0,function(c,d){return parseFloat(c)+parseFloat(d)});jQuery(b).html(time_in_hhmm(total_hours))}function time_in_hhmm(d){var b=parseInt(d/3600),c=parseInt((d%3600)/60),a=d%60;return pad2(b)+":"+pad2(c)}function pad2(a){return(a<10?"0":"")+a}makePageNonSelectable=function(a){if(document.all){a.onselectstart=function(){return false}}a.onmousedown=function(){return false}};function imgerror(a){if(a.width<=50){a.src=PROFILE_BLANK_THUMB_PATH}else{a.src=PROFILE_BLANK_MEDIUM_PATH}a.onerror="";return true}function pad(b,a){var a=a||2;var c=""+b;while(c.length<a){c="0"+c}return c}function normalizeHours(a){return a.split(new RegExp("\\s*:\\s*","gi")).collect(function(b){return pad(b)}).join(":")}function getParameterByName(c,b){b=b||window.location.href;c=c.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a="[\\?&]"+c+"=([^&#]*)";var e=new RegExp(a);var d=e.exec(b);if(d==null){return""}else{return decodeURIComponent(d[1].replace(/\+/g," "))}}function showSortableForm(b,a,c){jQuery("#"+a).hide();jQuery("#"+b).hide();jQuery("#"+c).fadeIn(300)}function hideSortableForm(b,a,c){jQuery("#"+a).fadeIn(300);jQuery("#"+b).show();jQuery("#"+c).hide()}function get_short_url(a,b){jQuery.getJSON("http://api.bitly.com/v3/shorten?callback=?",{format:"json",apiKey:"R_8ae5a67d8d9930440f0d1d4b794332f0",login:"freshdesk",longUrl:a},function(c){b(c.data.url)})}var delay=(function(){var a=0;return function(c,b){clearTimeout(a);a=setTimeout(c,b)}})();function insertTextAtCursor(b,e){var d=b.value,c,a;if(typeof b.selectionStart!="undefined"&&typeof b.selectionEnd!="undefined"){c=b.selectionEnd;b.value=d.slice(0,c)+e+d.slice(c);b.selectionStart=b.selectionEnd=c+e.length}else{if(typeof document.selection!="undefined"&&typeof document.selection.createRange!="undefined"){b.focus();a=document.selection.createRange();a.collapse(false);a.text=e;a.select()}}}function helpdesk_submit(a,d,c){var b=$("tickets-expanded");if(d){b.down("input[name=_method]").value=d}(c||[]).each(function(g){var e=$(g);var f=new Element("input",{type:"hidden",value:e.value});f.name=e.name;f.value=e.value;b.appendChild(f)});b.action=a;b.submit()}function reply_multiple_submit(a,d,c){var b=$("replymultiple");(c.concat(jQuery('#tickets-expanded [name="ids[]"]').get())||[]).each(function(e){e=$(e);if(e.name=="ids[]"&&!e.checked){return}var f=new Element("input",{type:"hidden"});f.name=e.name;f.value=e.value;b.appendChild(f)});b.action=a;b.submit()}function canned_response_submit(a,f,e){var b=$("ca_res_form");if(f){b.down("input[name=_method]").value=f}var c=$("move_folder_id");var d=new Element("input",{type:"hidden",value:c.value});d.name=c.name;if(d.value==0){alert("Please select a valid folder!!")}else{if(d.value==folder_id){alert("Cannot move to the same folder!!!")}else{b.appendChild(d);b.action=a;b.submit()}}}function setSelRange(c,d,a){if(c.setSelectionRange){c.focus();c.setSelectionRange(d,a)}else{if(c.createTextRange){var b=c.createTextRange();b.collapse(true);b.moveEnd("character",a);b.moveStart("character",d);b.select()}}}function setCaretToPos(a,b){setSelRange(a,b,b)}function construct_reply_url(a,b){email_split=a.split("@");email_name=email_split[0]||"";email_domain=email_split[1]||"";b=b.toLowerCase();reply_email="@"+b;if(email_domain.toLowerCase()==b){reply_email=email_name+reply_email}else{reply_email=email_domain.replace(/\./g,"")+email_name+reply_email}return reply_email}function setPostParam(c,a,d){var b=jQuery(c).find("[name="+a+"]");if(!b.get(0)){b=jQuery("<input type='hidden' name='"+a+"' />").appendTo(c)}b.val(d)}function quote_text(b){if(!jQuery(b).attr("data-quoted")){var a=jQuery("<a href='#' />").addClass("quoted_button").text(""),c=jQuery(b).find("div.freshdesk_quote").first().prepend(a).children("blockquote.freshdesk_quote").hide();a.bind("click",function(d){d.preventDefault();c.toggle()});jQuery(b).removeClass("request_mail");jQuery(b).attr("data-quoted",true)}}active_dialog=null;(function(b){var a={init:function(c){return this.each(function(e,f){curItem=b(f);var d=null;curItem.click(function(l){l.preventDefault();var k=b(this),h=k.data("dialog2"),j=k.data("width")||"750px",g=k.data("url")||this.href,m=k.data("parameters");if(h==null){h=b("<div class='loading-center' />").html("<br />").dialog({modal:true,width:j,height:"auto",position:"top",title:this.title,resizable:false,close:function(n,o){if(k.data("destroyOnClose")){k.dialog2("destroy")}}});active_dialog=h.load(g,m||{},function(o,p,n){h.removeClass("loading-center");h.css({height:"auto"})});k.data("dialog2",h)}else{h.dialog("open")}})})},destroy:function(){return this.each(function(){var d=b(this),c=d.data("dialog2");b(window).unbind(".dialog2");d.removeData("dialog2");$el=c.dialog("destroy");$el.remove();c=null})},show:function(){},hide:function(){return this.each(function(){console.log("Calling hide event")})},update:function(c){},close:function(c,d){return this.each(function(){console.log("Calling close event")})}};b.fn.dialog2=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.dialog2")}}};b.fn.autoLink=function(){this.contents().filter(function(){return this.nodeType===3}).each(function(c,d){if(d.nodeValue.match(/https?:/)){b(d).replaceWith(d.nodeValue.replace(/(https?:\/\/\S+)/g,'<a href="$1" target="_blank">$1</a>'))}});return this};b(document).bind("mousedown",function(c){if(b(c.target).hasClass("chzn-results")){return}if(b(c.target).parent().is(".fd-ajaxmenu, .fd-ajaxmenu .contents")){return}if(b(this).data("active-menu")){if(!b(c.target).data("menu-active")){hideActiveMenu()}else{setTimeout(hideActiveMenu,500)}}});hideActiveMenu=function(){b(b(document).data("active-menu-element")).hide().removeClass("active-nav-menu");b(b(document).data("active-menu-parent")).removeClass("selected");b(document).data("active-menu",false)};b.fn.showAsMenu=function(c){this.each(function(d,e){if(b(e).data("showAsMenu")){return}b(e).bind("click",function(f){f.preventDefault();elementid=c||e.getAttribute("menuid");element=b(elementid).show().css("visibility","visible");b(document).data({"active-menu":true,"active-menu-element":element,"active-menu-parent":this});b(element).find("a, li").data("menu-active",true);b(e).addClass("selected")});b(e).data("showAsMenu",true)})};b.fn.showAsAjaxMenu=function(){this.each(function(c,d){b(d).bind("click",function(e){e.preventDefault();e.stopPropagation();if(b(d).data("options-fetched")!=true){if(typeof(b(document).data("dynamic-menu-count"))=="undefined"){b(document).data("dynamic-menu-count",0)}menuid=b(document).data("dynamic-menu-count")+1;b(document).data("dynamic-menu-count",menuid);menu_container=b("<div>");menu_container.attr("id","menu_"+menuid);menu_container.data("parent",b(d));menu_container.addClass("loading fd-ajaxmenu");menu_container.html('<div class="contents"></div>');menu_container.insertAfter(b(d));b(d).data("menuid","menu_"+menuid);b.ajax({url:b(d).data("options-url"),success:function(g,h,f){b("#menu_"+menuid).removeClass("loading");b("#menu_"+menuid+" .contents").html(g);match_found=false;text_to_match=b(d).children(".result").first().text();b("#menu_"+menuid+" .contents").children().each(function(j){if(!found&&b(this).data("text")==text_to_match||b(this).text()==text_to_match){b(this).addClass("active").prepend('<span class="icon ticksymbol"></span>');match_found=true}});b(d).data("options-fetched",true)}})}menu=b("#"+b(d).data("menuid"));menu.show().css("visibility","visible");b(document).data({"active-menu":true,"active-menu-element":menu,"active-menu-parent":d});b(d).addClass("selected")})})};b.fn.showPreloadedMenu=function(){this.each(function(c,d){b(d).bind("click",function(e){e.preventDefault();e.stopPropagation();if(b(d).data("options-fetched")!=true){if(typeof(b(document).data("dynamic-menu-count"))=="undefined"){b(document).data("dynamic-menu-count",0)}menuid=b(document).data("dynamic-menu-count")+1;b(document).data("dynamic-menu-count",menuid);menu_container=b("<div>").attr("id","menu_"+menuid).addClass("loading fd-ajaxmenu").html('<div class="contents"></div>').data("parent",b(d));menu_container.find(".contents").append(b(b(d).data("options")).html());menu_container.insertAfter(b(d));b(d).data("menuid","menu_"+menuid);b(d).data("options-fetched",true);menuid="menu_"+menuid;text_to_match=b(d).children(".result").first().text();match_found=false;b("#"+menuid+" .contents").children().each(function(f){if(!match_found&&(b(this).data("text")==text_to_match||b(this).text()==text_to_match)){b(this).addClass("active").prepend('<span class="icon ticksymbol"></span>');match_found=true}})}else{menuid=b(d).data("menuid")}menu=b("#"+menuid);menu.show().removeClass("loading").css("visibility","visible");b(document).data({"active-menu":true,"active-menu-element":menu,"active-menu-parent":d});b(d).addClass("selected")})})};b.fn.autoGrowInput=function(c){c=b.extend({maxWidth:1000,minWidth:0,comfortZone:70},c);this.filter("input:text").each(function(){var g=c.minWidth||b(this).width(),h="",e=b(this),f=b("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:e.css("fontSize"),fontFamily:e.css("fontFamily"),fontWeight:e.css("fontWeight"),letterSpacing:e.css("letterSpacing"),whiteSpace:"nowrap"}),d=function(){if(h===(h=e.val())){return}var n=h.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");f.html(n);var l=f.width(),m=(l+c.comfortZone)>=g?l+c.comfortZone:g,k=e.width(),j=(m<k&&m>=g)||(m>g&&m<c.maxWidth);if(j){e.width(m)}};f.insertAfter(e);b(this).bind("keyup keydown blur update",d)});return this}})(jQuery);(function(b){var a={init:function(c){return this.each(function(){$this=b(this);dialogid=this.id+"_dialog";dialogcontent=this.id+"_dialogcontent";var d=null;b("body").prepend('<div id="'+dialogid+'" class="modal hide fade"><div class="modal-header"><a href="#" class="close"></a><h3 class="title">'+this.title+'</h3></div><div id="'+dialogcontent+'"><p class="loading-box" ></p></div></div>');b("#"+dialogid).data({content:dialogcontent,href:$this.attr("href")});$this.attr("data-controls-modal",dialogid);$this.attr("data-backdrop",true);$this.attr("data-keyboard",true);$this.modal();b("#"+dialogid).bind("shown",function(){self=b(this);if(!self.attr("ajax-loaded")){b("#"+self.data("content")).load(self.data("href"),{},function(f,g,e){self.attr("ajax-loaded",true);self.find(".close-dialog").click(function(){self.modal("hide")})})}})})}};b.fn.modalAjax=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.dialog2")}}};b.fn.animateHighlight=function(d,h,e){var g=h||"#FFFF9C";var c=e||1500;var d=d||"transparent";var f=b(this);f.stop().css("background-color",g);f.animate({backgroundColor:d},c,function(){f.css({"background-color":""})})}})(jQuery);setCookie=function(b,d,a,f){var e=new Date();e.setDate(e.getDate()+a);var c=escape(d)+((a==null)?"":"; expires="+e.toUTCString())+"; path="+((f==null)?"/":f);document.cookie=b+"="+c};getCookie=function(b){var c,a,e,d=document.cookie.split(";");for(c=0;c<d.length;c++){a=d[c].substr(0,d[c].indexOf("="));e=d[c].substr(d[c].indexOf("=")+1);a=a.replace(/^\s+|\s+$/g,"");if(a==b){return unescape(e)}}};deleteCookie=function(a,b){setCookie(a,"",-1,b)};supports_html5_storage=function(){try{return"localStorage" in window&&window.localStorage!==null}catch(a){return false}};var keyed_up=0;function simpleTimedSearch(b,a,c){jQuery(b).keyup(function(d){if(d.keyCode<=90&&d.keyCode>=46||d.keyCode==8){keyed_up=keyed_up+1;var e=keyed_up;search_string=jQuery(b).val();setTimeout(function(){if(e==keyed_up){new Ajax.Request(a+"&search_string="+search_string,{asynchronous:true,evalScripts:true,method:"get"})}},c)}})}function fetchResponses(c,d){var e=jQuery(d);var a="responses"+e.data("folder");if(!e.hasClass("folderSelected")){if(e.hasClass("clicked")){var b=jQuery("#fold-list .list2").detach();jQuery("#cf_cache").append(b);jQuery("#fold-list").append(jQuery("#"+a))}else{var f=jQuery(".list2").detach();jQuery("#cf_cache").append(f);jQuery("#fold-list").append('<div id="responses" class="list2"></div>');if(!localStorage.local_ca_response){jQuery("#responses").addClass("no_recently_used")}jQuery("#responses").addClass("loading-center");jQuery.getScript(c,function(){jQuery("#responses").attr("id",a);e.addClass("clicked")})}}}function trim(a){return a.replace(/^\s+|\s+$/g,"")}function typeString(b){if(typeof b!="object"){return typeof b}if(b===null){return"null"}var a=Object.prototype.toString.call(b).match(/\[object\s(\w+)\]/)[1];return a.toLowerCase()}function trimArray(a){if(typeString(a)=="array"){for(i=0;i<a.length;i++){a[i]=trimArray(a[i])}return a}return a.replace(/^\s+|\s+$/g,"")}function escapeJSON(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\/]/g,"\\/").replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t")}jQuery.fn.serializeObject=function(){var a=this,d={},c={},e={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};this.build=function(h,f,g){h[f]=g;return h};this.push_counter=function(f){if(c[f]===undefined){c[f]=0}return c[f]++};var b=jQuery(this).serializeArray();jQuery.each(b,function(){if(!e.validate.test(this.name)){return}var f,g=this.name.match(e.key),j=this.value,h=this.name;if(jQuery(a).find('[name="'+this.name+'"]').hasClass("array")){j=j.replace(/\s/g,"");j=j.split(",")}else{if(jQuery(a).find('[name="'+this.name+'"]').hasClass("datetimepicker_popover")){j=new Date(j);epoch_sec=j.getTime()+(1100*60000);j=(new Date(epoch_sec)).toISOStringCustom().trim()}}while((f=g.pop())!==undefined){h=h.replace(new RegExp("\\["+f+"\\]$"),"");if(f.match(e.push)){j=a.build([],a.push_counter(h),j)}else{if(f.match(e.fixed)){j=a.build([],f,j)}else{if(f.match(e.named)){j=a.build({},f,j)}}}}d=jQuery.extend(true,d,j)});return d};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};Date.prototype.toISOStringCustom=function(){function a(b){return b<10?"0"+b:b}return this.getFullYear()+"-"+a(this.getMonth()+1)+"-"+a(this.getDate())+"T"+a(this.getHours())+":"+a(this.getMinutes())+":"+a(this.getSeconds())+"."+a(this.getMilliseconds())+"+1100"};function escapeHtml(a){var b=document.createElement("div");b.appendChild(document.createTextNode(a));return b.innerHTML}function unescapeHtml(a){var c=document.createElement("div");c.innerHTML=a;var b=c.childNodes[0];return b?b.nodeValue:""}if(typeof(Autocompleter)=="undefined"){Autocompleter={}}Autocompleter.Json=Class.create(Autocompleter.Base,{initialize:function(c,d,a,b){b=b||{};this.baseInitialize(c,d,b);this.lookupFunction=a;this.options.choices=b.choices||10},getUpdatedChoices:function(){this.lookupFunction(this.getToken().toLowerCase(),this.updateJsonChoices.bind(this))},updateJsonChoices:function(a){this.updateChoices("<ul>"+a.slice(0,this.options.choices).map(this.jsonChoiceToListChoice.bind(this)).join("")+"</ul>")},jsonChoiceToListChoice:function(a,b){return"<li>"+a.escapeHTML()+"</li>"}});Autocompleter.RateLimiting=function(){this.currentRequest=null;this.scheduledRequest=null};Autocompleter.RateLimiting.prototype={schedule:function(b,a,c){this.scheduledRequest={f:b,searchTerm:a,callback:c};this._sendRequest()},_sendRequest:function(){if(!this.currentRequest){this.currentRequest=this.scheduledRequest;this.scheduledRequest=null;this.currentRequest.f(this.currentRequest.searchTerm,this._callback.bind(this))}},_callback:function(a){this.currentRequest.callback(a);this.currentRequest=null;if(this.scheduledRequest){this._sendRequest()}}};Autocompleter.Cache=Class.create({initialize:function(b,a){this.cache=new Hash();this.backendLookup=b;this.rateLimiter=new Autocompleter.RateLimiting();this.options=Object.extend({choices:10,fuzzySearch:false,searchKey:"searchKey"},a||{})},lookup:function(a,b){return this._lookupInCache(a,null,b)||this.rateLimiter.schedule(this.backendLookup,a,this._storeInCache.curry(a,b).bind(this))},_lookupInCache:function(d,b,c){var b=b||d;var a=this.cache.get(b);if(a==null){if(b.length>1){return this._lookupInCache(d,b.substr(0,b.length-1),c)}else{return false}}else{if(d!=b){a=this._localSearch(a,d);this._storeInCache(d,null,a)}c(a.slice(0,this.options.choices));return true}},_localSearch:function(f,d){var h=this.options.fuzzySearch?new RegExp(d.gsub(/./,".*#{0}"),"i"):new RegExp(d,"i");var g=new Array();var e=null;var b=null;for(var c=0,a=f.length;c<a;++c){e=f[c];if(h.test((typeof e=="object")?e[this.options.searchKey]:e)){g.push(e)}}return g},_storeInCache:function(a,c,b){this.cache.set(a,b);if(c){c(b.slice(0,this.options.choices))}}});Autocompleter.MultiValue=Class.create({options:$H({}),element:null,dataFetcher:null,createSelectedElement:function(e,d){var c=new Element("a").update("x");c.className="close-link";c.observe("click",function(f){this.removeEntry(f.element().up("li"));f.stop()}.bind(this));var b=new Element("input",{type:"hidden",value:e});b.name=this.name+"[]";var a=new Element("li",{choice_id:e});a.className="choice";return a.insert((""+d).escapeHTML()).insert(c).insert(b)},initialize:function(e,c,b,d){this.options=d||{};var a=$(e);this.name=a.name;this.form=a.up("form");this.dataFetcher=c;this.active=false;this.acceptNewValues=this.options.acceptNewValues||false;this.options.frequency=this.options.frequency||0.4;this.options.allowSpaces=this.options.allowSpaces||false;this.options.minChars=this.options.minChars||2;this.options.tabindex=this.options.tabindex||a.readAttribute("tabindex")||"";this.options.placeHolder=this.options.placeHolder||"";this.options.onShow=this.options.onShow||function(f,h){if(!h.style.position||h.style.position=="absolute"){h.style.position="absolute";try{h.clonePosition(f,{setHeight:false,offsetTop:f.offsetHeight})}catch(g){}}Effect.Appear(h,{duration:0.15})};this.options.onHide=this.options.onHide||function(f,g){new Effect.Fade(g,{duration:0.15})};this.searchField=new Element("input",{type:"text",autocomplete:"off",tabindex:this.options.tabindex,placeholder:this.options.placeHolder});this.searchFieldItem=new Element("li").update(this.searchField);this.searchFieldItem.className="search_field_item";this.holder=new Element("ul",{style:a.readAttribute("style")}).update(this.searchFieldItem);this.holder.className="multi_value_field";a.insert({before:this.holder});a.remove();this.choicesHolderList=new Element("ul");this.choicesHolder=new Element("div").update(this.choicesHolderList);this.choicesHolder.className="autocomplete";this.choicesHolder.style.position="absolute";this.holder.insert({after:this.choicesHolder});this.choicesHolder.hide();Event.observe(this.holder,"click",Form.Element.focus.curry(this.searchField));Event.observe(this.searchField,"keydown",this.onSearchFieldKeyDown.bindAsEventListener(this));if(this.acceptNewValues){Event.observe(this.searchField,"keyup",this.onSearchFieldKeyUp.bindAsEventListener(this));Event.observe(this.searchField,"blur",this.onSearchFieldBlur.bindAsEventListener(this))}Event.observe(this.searchField,"focus",this.getUpdatedChoices.bindAsEventListener(this));Event.observe(this.searchField,"focus",this.show.bindAsEventListener(this));Event.observe(this.searchField,"blur",this.hide.bindAsEventListener(this));this.setEmptyValue();(b||[]).each(function(f){this.addEntry(this.getValue(f),this.getTitle(f))},this)},show:function(){if(!this.choicesHolderList.empty()){if(Element.getStyle(this.choicesHolder,"display")=="none"){this.options.onShow(this.holder,this.choicesHolder)}}},hide:function(){this.stopIndicator();if(Element.getStyle(this.choicesHolder,"display")!="none"){this.options.onHide(this.element,this.choicesHolder)}if(this.iefix){Element.hide(this.iefix)}},onSearchFieldKeyDown:function(b){if(this.active){switch(b.keyCode){case Event.KEY_TAB:case Event.KEY_RETURN:this.selectEntry();b.stop();case Event.KEY_ESC:this.hide();this.active=false;b.stop();return;case Event.KEY_LEFT:case Event.KEY_RIGHT:return;case Event.KEY_UP:this.markPrevious();this.render();b.stop();return;case Event.KEY_DOWN:this.markNext();this.render();b.stop();return}}else{if(b.keyCode==Event.KEY_TAB||b.keyCode==Event.KEY_RETURN||(Prototype.Browser.WebKit>0&&b.keyCode==0)){return}else{if(b.keyCode==Event.KEY_BACKSPACE){if(b.element().getValue().blank()){var a=b.element().up("li.search_field_item").previous("li.choice");if(a){this.removeEntry(a)}}}}}this.changed=true;this.hasFocus=true;if(this.observer){clearTimeout(this.observer)}this.observer=setTimeout(this.onObserverEvent.bind(this),this.options.frequency*1000)},onSearchFieldKeyUp:function(a){var c="";if(a.keyCode==188||a.keyCode==32){var b=$F(a.element());var d=0;if(a.keyCode==188){d=b.indexOf(",")}else{if(a.keyCode==32&&!this.options.allowSpaces){d=b.indexOf(" ")}}c=b.substr(0,d).toLowerCase().strip()}if(!c.blank()){this.addEntry(c,c);a.element().value=b.substring(d+1,b.length)}},onSearchFieldBlur:function(a){this.addNewValueFromSearchField.bind(this).delay(0.1,a.element());this.selectEntry()},addNewValueFromSearchField:function(b){var a=$F(b).strip();if(!a.blank()){this.addEntry(a,a);b.value=""}},onObserverEvent:function(){this.changed=false;this.tokenBounds=null;if(this.getToken().length>=this.options.minChars){this.getUpdatedChoices()}else{this.active=false;this.hide()}},getToken:function(){return this.searchField.value},markPrevious:function(){if(this.index>0){this.index--}else{this.index=this.entryCount-1}},markNext:function(){if(this.index<this.entryCount-1){this.index++}else{this.index=0}},getEntry:function(a){return this.choicesHolderList.childNodes[a]},getCurrentEntry:function(){return this.getEntry(this.index)},selectEntry:function(){try{this.active=false;var a=this.getCurrentEntry();this.addEntry(a.choiceId,a.textContent||a.innerText,true);this.searchField.clear();this.searchField.focus()}catch(b){}},addEntry:function(g,f,b){var a=[g],c,d=[f];if(!b&&this.options.separatorRegEx){a=g.split(this.options.separatorRegEx);d=f.split(this.options.separatorRegEx)}for(c=0;c<a.length;c++){g=a[c],f=d[c];f=f||g;if(!this.selectedEntries().include(""+g)){this.searchFieldItem.insert({before:this.createSelectedElement(g,f)})}var e=this.emptyValueElement();if(e){e.remove()}}jQuery(this.searchField).removeAttr("placeholder")},removeEntry:function(a){a=Object.isElement(a)?a:this.holder.down("li[choice_id="+a+"]");if(a){a.remove();if(this.selectedEntries().length==0){this.setEmptyValue();jQuery(this.searchField).attr("placeholder",this.options.placeHolder)}}},clear:function(){this.holder.select("li.choice").each(function(a){this.removeEntry(a)},this)},setEmptyValue:function(){if(!this.emptyValueElement()){this.form.insert(jQuery("<input />").attr({type:"hidden",name:this.name}).addClass("emptyValueField").get(0))}},emptyValueElement:function(){return this.form.down("input.emptyValueField[name='"+this.name+"']")},selectedEntries:function(){return this.form.select("input[type=hidden][name='"+this.name+"[]']").map(function(a){return a.value})},startIndicator:function(){},stopIndicator:function(){},getUpdatedChoices:function(){this.startIndicator();var a=this.getToken();if(a.length>0){this.dataFetcher(a,this.updateChoices.curry(a).bind(this))}else{this.choicesHolderList.update()}},updateChoices:function(b,d){if(!this.changed&&this.hasFocus){this.entryCount=d.length;this.choicesHolderList.innerHTML="";d.each(function(e,f){this.choicesHolderList.insert(this.createChoiceElement(this.getValue(e),this.getTitle(e),f,b))}.bind(this));for(var a=0;a<this.entryCount;a++){var c=this.getEntry(a);c.choiceIndex=a;this.addObservers(c)}this.stopIndicator();this.index=0;if(this.entryCount==1&&this.options.autoSelect){this.selectEntry();this.hide()}else{this.render()}}},addObservers:function(a){Event.observe(a,"mouseover",this.onHover.bindAsEventListener(this));Event.observe(a,"mousedown",this.onClick.bindAsEventListener(this));Event.observe(a,"touchend",this.onClick.bindAsEventListener(this))},onHover:function(b){var a=Event.findElement(b,"LI");if(this.index!=a.autocompleteIndex){this.index=a.autocompleteIndex;this.render()}Event.stop(b)},onClick:function(b){var a=Event.findElement(b,"LI");this.index=a.autocompleteIndex;this.selectEntry();this.hide()},createChoiceElement:function(e,d,b,a){var c=new Element("li",{choice_id:e});c.innerHTML=(""+d).escapeHTML();c.choiceId=e;c.autocompleteIndex=b;return c},render:function(){if(this.entryCount>0){for(var a=0;a<this.entryCount;a++){this.index==a?Element.addClassName(this.getEntry(a),"selected"):Element.removeClassName(this.getEntry(a),"selected")}if(this.hasFocus){this.show();this.active=true}}else{this.active=false;this.hide()}},getTitle:function(a){return Object.isArray(a)?a[0]:a},getValue:function(a){return Object.isArray(a)?a[1]:a}});Autocompleter.PanedSearch=Class.create({options:$H({}),element:null,dataFetcher:null,initialize:function(f,d,h,g,c,e){this.options=e||{};this.resultTemplate=h;var b=$(f);var a=$(g);this.result=a;this.name=b.name;this.dataFetcher=d;this.active=false;this.acceptNewValues=this.options.acceptNewValues||false;this.options.frequency=this.options.frequency||0.4;this.options.allowSpaces=this.options.allowSpaces||false;this.options.minChars=this.options.minChars||2;this.options.tabindex=this.options.tabindex||b.readAttribute("tabindex")||"";this.options.onShow=this.options.onShow||function(j,l){if(!l.style.position||l.style.position=="absolute"){l.style.position="absolute";try{l.clonePosition(j,{setHeight:false,offsetTop:j.offsetHeight})}catch(k){}}Effect.Appear(l,{duration:0.15})};this.options.afterPaneShow=this.options.afterPaneShow||function(){};this.options.onHide=this.options.onHide||function(j,k){};this.searchField=b;this.choicesHolderList=new Element("ul");this.choicesHolder=new Element("div").update(this.choicesHolderList);this.choicesHolder.className="autocompletepane";$(a).insert(this.choicesHolder);Event.observe(this.searchField,"click",Form.Element.focus.curry(this.searchField));Event.observe(this.searchField,"keydown",this.onSearchFieldKeyDown.bindAsEventListener(this));if(this.acceptNewValues){Event.observe(this.searchField,"keyup",this.onSearchFieldKeyUp.bindAsEventListener(this))}Event.observe(this.searchField,"focus",this.getUpdatedChoices.bindAsEventListener(this));Event.observe(this.searchField,"focus",this.show.bindAsEventListener(this));Event.observe(this.searchField,"blur",this.hide.bindAsEventListener(this));(c||[]).each(function(j){this.addEntry(this.getValue(j),this.getTitle(j))},this)},show:function(){if(!this.choicesHolderList.empty()){this.choicesHolder.addClassName("loading-center");if(Element.getStyle(this.choicesHolder,"display")=="none"){this.choicesHolder.update();this.options.onShow(this.holder,this.choicesHolder)}this.options.afterPaneShow();this.choicesHolder.removeClassName("loading-center")}},hide:function(){this.stopIndicator();if(Element.getStyle(this.choicesHolder,"display")!="none"){this.options.onHide(this.element,this.choicesHolder)}if(this.iefix){Element.hide(this.iefix)}},onSearchFieldKeyDown:function(a){if(this.active){switch(a.keyCode){case Event.KEY_TAB:case Event.KEY_RETURN:this.getEntry(this.index).click();a.stop();case Event.KEY_ESC:this.hide();this.active=false;a.stop();return;case Event.KEY_LEFT:case Event.KEY_RIGHT:return;case Event.KEY_UP:this.markPrevious();this.render();a.stop();return;case Event.KEY_DOWN:this.markNext();this.render();a.stop();return}}else{if(a.keyCode==Event.KEY_TAB||a.keyCode==Event.KEY_RETURN||(Prototype.Browser.WebKit>0&&a.keyCode==0)){return}else{if(a.keyCode==Event.KEY_BACKSPACE){if(a.element().getValue().blank()){}}}}this.changed=true;this.hasFocus=true;if(this.observer){clearTimeout(this.observer)}this.observer=setTimeout(this.onObserverEvent.bind(this),this.options.frequency*1000)},onSearchFieldKeyUp:function(a){var c="";if(a.keyCode==188||a.keyCode==32){var b=$F(a.element());var d=0;if(a.keyCode==188){d=b.indexOf(",")}else{if(a.keyCode==32&&!this.options.allowSpaces){d=b.indexOf(" ")}}c=b.substr(0,d).toLowerCase().strip()}if(!c.blank()){this.addEntry(c,c);a.element().value=b.substring(d+1,b.length)}},onObserverEvent:function(){this.changed=false;this.tokenBounds=null;if(this.getToken().length>=this.options.minChars){this.getUpdatedChoices()}else{this.active=false;this.hide()}},getToken:function(){return this.searchField.value},markPrevious:function(){if(this.index>0){this.index--}else{this.index=this.entryCount-1}if((this.getEntry(this.index).offsetTop+this.getEntry(this.index).getHeight())<this.result.getHeight()){this.result.scrollTop-=this.getEntry(this.index).getHeight()}if(this.index==this.entryCount-1){this.result.scrollTop=this.getEntry(0).getHeight()*this.entryCount}},markNext:function(){if(this.index<this.entryCount-1){this.index++}else{this.index=0}if(((this.getEntry(this.index).offsetTop)+this.getEntry(this.index).getHeight())>(this.result.getHeight()-10)){this.result.scrollTop+=this.getEntry(this.index).getHeight()}if((this.getEntry(this.index).offsetTop)+this.getEntry(this.index).getHeight()==this.getEntry(0).getHeight()+this.getEntry(0).offsetTop){this.result.scrollTop=0}},getEntry:function(a){return this.choicesHolderList.childNodes[a]},getCurrentEntry:function(){return this.getEntry(this.index)},removeEntry:function(a){a=Object.isElement(a)?a:this.holder.down("li[choice_id="+a+"]");if(a){a.remove();if(this.selectedEntries().length==0){this.setEmptyValue()}}},clear:function(){this.holder.select("li.choice").each(function(a){this.removeEntry(a)},this)},startIndicator:function(){},stopIndicator:function(){},getUpdatedChoices:function(){this.startIndicator();var a=this.getToken();if(a.length>0){this.dataFetcher(a,this.updateChoices.curry(a).bind(this))}else{this.choicesHolderList.update()}},updateChoices:function(b,d){if(!this.changed&&this.hasFocus){this.entryCount=d.length;this.choicesHolderList.innerHTML="";d.each(function(e,f){this.choicesHolderList.insert(this.createChoiceElement(e,f,b))}.bind(this));for(var a=0;a<this.entryCount;a++){var c=this.getEntry(a);c.choiceIndex=a;this.addObservers(c)}this.stopIndicator();this.index=0;if(this.entryCount==1&&this.options.autoSelect){this.selectEntry();this.hide()}else{this.render()}}},addObservers:function(a){Event.observe(a,"mouseover",this.onHover.bindAsEventListener(this));Event.observe(a,"click",this.onClick.bindAsEventListener(this))},onHover:function(a){},onClick:function(b){var a=Event.findElement(b,"LI");this.index=a.autocompleteIndex},createChoiceElement:function(b,c,a){var d=this.resultTemplate.evaluate(b);d.choiceId=b.id||c;d.autocompleteIndex=c;return d},render:function(){if(this.entryCount>0){for(var a=0;a<this.entryCount;a++){this.index==a?Element.addClassName(this.getEntry(a),"selected"):Element.removeClassName(this.getEntry(a),"selected")}if(this.hasFocus){this.show();this.active=true}}else{this.active=false;this.hide();this.choicesHolderList.update('<div class="list-noinfo">No Matching Results</div>')}}});var date_lang={ago:"ago",from:"from now",now:"just now",second:"second",seconds:"seconds",minute:"minute",minutes:"minutes",hour:"hour",hours:"hours",day:"day",days:"days",week:"week",weeks:"weeks",month:"month",months:"months",year:"year",years:"years"};function humaneDate(e,c){var b=date_lang,j=[[1,b.now],[60,b.second,b.seconds,1],[3600,b.minute,b.minutes,60],[86400,b.hour,b.hours,3600],[604800,b.day,b.days,86400],[2628000,b.week,b.weeks,604800],[31536000,b.month,b.months,2628000],[Infinity,b.year,b.years,31536000]],a=typeof e=="string",e=a?new Date((""+e).replace(/-/g,"/").replace(/[TZ]/g," ")):e,c=c||new Date,l=(c-e+(c.getTimezoneOffset()-(a?0:e.getTimezoneOffset()))*60000)/1000,f;if(l<0){l=Math.abs(l);f=" "+b.from}else{f=" "+b.ago}function h(n,o){var m=0.1;if(n>=o&&n<=o*(1+m)){return o}return n}for(var g=0,k=j[0];j[g];k=j[++g]){if(l<k[0]){if(g===0){return k[1]}var d=Math.ceil(h(l,k[3])/(k[3]));return d+" "+(d!=1?k[2]:k[1])+(g>0?f:"")}}}if(typeof jQuery!="undefined"){jQuery.fn.humaneDates=function(){return this.each(function(){var b=jQuery(this),a=humaneDate(new Date(b.attr("title")));if(a&&b.html()!=a){b.html(a)}})}}window.fdUtil={make_defined:function(){$A(arguments).each(function(a){a=a||""})}};window.FactoryUI={text:function(d,a,b,g){var e=g||"text",h=d||"",c=a||"",f=b||"";return jQuery("<input type='text' />").prop({name:c}).addClass(e).val(f)},dropdown:function(f,b,e){if(!f){return}var d=e||"dropdown",c=b||"",a=jQuery("<select />").prop({name:c}).addClass(d);f.each(function(g){jQuery("<option />").text(g.value).appendTo(a).get(0).value=g.name});return jQuery(a)},optgroup:function(f,b,e){if(!f){return}var d=e||"dropdown",c=b||"",a=jQuery("<select />").prop({name:c}).addClass(d);f.each(function(h){var g=jQuery("<optgroup label='"+h[0]+"' />");h[1].each(function(j){jQuery("<option />").text(j[1]).appendTo(g).get(0).value=j[0]});g.appendTo(a)});return jQuery(a)},paragraph:function(d,a,b,g){var e=g||"paragraph",h=d||"",c=a||"",f=b||"";return jQuery("<textarea />").prop({name:c}).addClass(e).val(f)},checkbox:function(h,a,d,g){var e=g||"checkbox",c=h||"",b=a||"",f=(d=="true")?"checked":""||"";labelBox=jQuery("<label />").addClass(e);hiddenBox=jQuery("<input type='hidden' />").prop({name:b,value:false});checkBox=jQuery("<input type='checkbox' />").prop({name:b,checked:f,value:true});return labelBox.append(hiddenBox).append(checkBox).append(c)}};var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(a){a.validator.addMethod("tweet",a.validator.methods.maxlength,"Your Tweet was over 140 characters. You'll have to be more clever.");a.validator.addMethod("facebook",a.validator.methods.maxlength,"Your Facebook reply was over 8000 characters. You'll have to be more clever.");a.validator.addClassRules("tweet",{tweet:140});a.validator.addClassRules("facebook",{tweet:8000});a.validator.addMethod("notEqual",function(c,b,d){return((this.optional(b)||c).strip().toLowerCase()!=a(d).val().strip().toLowerCase())},"This element should not be equal to");a.validator.addMethod("multiemail",function(c,b){if(this.optional(b)){return true}var d=c.split(new RegExp("\\s*,\\s*","gi"));valid=true;a.each(d,function(f,e){valid=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e);if(!valid){return false}});return valid},"One or more email addresses are invalid.");a.validator.addClassRules("multiemail",{multiemail:true});a.validator.addMethod("hours",function(c,b){hours=normalizeHours(c);b.value=hours;return/^([0-9]*):([0-5][0-9])(:[0-5][0-9])?$/.test(hours)},"Please enter a valid hours.");a.validator.addClassRules("hours",{hours:true});a.validator.addMethod("domain_validator",function(c,b){if(this.optional(b)){return true}if(c.length==0){return true}if(/((http|https|ftp):\/\/)\w+/.test(c)){valid=false}else{if(/\w+[\-]\w+/.test(c)){valid=true}else{if((/\W\w*/.test(c))){valid=false}else{valid=true}}}if(/_+\w*/.test(c)){valid=false}return valid},"Invalid URL format");a.validator.addClassRules("domain_validator",{domain_validator:true});a.validator.addClassRules("url_validator",{url:true});a.validator.addMethod("url_without_protocol",function(d,c){var e=(c&&a(c).data("domain"))||"freshdesk.com",b=new RegExp("^(?!.*\\."+e+"$)[/\\w\\.-]+$");d=trim(d);return this.optional(c)||(/^((https?|ftp):\/\/)?(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(d)&&b.test(d))},"Please enter a valid URL");a.validator.addClassRules({url_without_protocol:{url_without_protocol:true}});a.validator.addMethod("requester",function(c,b){var e=jQuery(b).data("requesterCheck"),d=jQuery(b).data("partialRequesterList")||[];_user=jQuery(b).data("currentUser");if(/(\b[-a-zA-Z0-9.'_%+]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}\b)/.test(c)){e=true;jQuery("#helpdesk_ticket_requester_id").val("")}if(c==_user){e=true}d.each(function(f){if(trim(c)==trim(f.details)){e=true}});return e},jQuery.format('We could not find any matching requester. Please check your query, or try adding a <a href="#" id="add_requester_btn_proxy">new requester.</a>'));a.validator.addClassRules("requester",{requester:true});a.validator.addMethod("require_from_group",function(h,g,f){var j=f[0];var d=f[1];var c=a(d,g.form);var b=c.filter(function(){return a(this).val()!=""});var e=c.not(b);if(b.length<j&&e[0]==g){return false}return true},jQuery.format("Please enter a Email or Phone Number"));a.validator.addClassRules("require_from_group",{require_from_group:[1,".user_info"]});a.validator.addMethod("time_12",function(g,e){if(!/^[0-9]{1,2}:[0-9]{1,2} [ap]m$/i.test(g)){return false}var d=g.split(" ");var j=d[0].split(":"),c=d[1];var f=j[0],b=j[1];if(c!="am"&&c!="pm"){return false}if(f<1||f>12){return false}if(b<0||b>59){return false}return true},"Invalid time.");a.validator.addClassRules("time-12",{time_12:true})})(jQuery);var $J=jQuery.noConflict();is_touch_device=function(){return !!("ontouchstart" in window)||!!("onmsgesturechange" in window)};(function(a){a(document).ready(function(){var l=null;var d=false;var j;var f;var k=false;var h=false;if(is_touch_device()){a("html").addClass("touch")}a("body").click(function(e){hideWidgetPopup(e)});a("a.dialog2, a[data-ajax-dialog], button.dialog2").livequery(function(e){a(this).dialog2()});hideWidgetPopup=function(e){if((l!=null)&&!a(e.target).parents().hasClass("popover")){if(!k){l.popover("hide");l=null}}if(h){k=false;h=false}};hidePopover=function(e){if(!a.contains(this,e.relatedTarget)){if(d&&!a(e.relatedTarget).is("[rel=contact-hover]")){j=setTimeout(function(){l.popover("hide");d=false},1000)}}};hideActivePopovers=function(e){a("#new_watcher_page").hide();a("[rel=widget-popover],[rel=contact-hover],[rel=hover-popover]").each(function(){if(e.target!=a(this).get(0)){a(this).popover("hide")}})};a("div.popover").live("mouseleave",hidePopover).live("mouseenter",function(e){clearTimeout(j)});a("a[rel=popover]").popover({delayOut:300,trigger:"manual",offset:5,html:true,reloadContent:false,template:'<div class="arrow"></div><div class="inner"><div class="content"><p></p></div></div>',content:function(){return a("#"+a(this).attr("data-widget-container")).html()}});a("a[rel=widget-popover]").popover({delayOut:300,trigger:"manual",offset:5,html:true,reloadContent:false,template:'<div class="arrow"></div><div class="inner"><div class="content"><p></p></div></div>',content:function(){return a("#"+a(this).attr("data-widget-container")).val()}});a("[rel=contact-hover]").livequery(function(){a(this).popover({delayOut:300,trigger:"manual",offset:5,html:true,reloadContent:false,template:'<div class="dbl_left arrow"></div><div class="hover_card inner"><div class="content"><p></p></div></div>',content:function(){var e="user-info-div-"+a(this).data("contactId");return jQuery("#"+e).html()||"<div class='loading-box' id='"+e+"' rel='remote-load' data-url='"+a(this).data("contactUrl")+"'></div>"}})});a("[rel=hover-popover]").livequery(function(){a(this).popover({delayOut:300,trigger:"manual",offset:5,html:true,reloadContent:false,template:'<div class="dbl_left arrow"></div><div class="hover_card inner"><div class="content"><p></p></div></div>',content:function(){return a(this).data("content")||a("#"+a(this).attr("data-widget-container")).val()}})});a("[rel=remote-load]").livequery(function(){if(!document.getElementById("remote_loaded_dom_elements")){a("<div id='remote_loaded_dom_elements' class='hide' />").appendTo("body")}var e=jQuery(this);a(this).load(a(this).data("url"),function(){a(this).attr("rel","");a(this).removeClass("loading-box");if(!e.data("loadUnique")){a(this).clone().prependTo("#remote_loaded_dom_elements")}})});a("input.datepicker_popover").livequery(function(){a(this).datepicker({dateFormat:"yy-mm-dd",beforeShow:function(){k=true;h=false},onClose:function(){h=true}})});a("input.datetimepicker_popover").livequery(function(){a(this).datetimepicker({timeFormat:"HH:mm:ss",dateFormat:"MM dd,yy",beforeShow:function(){k=true;h=false},onClose:function(){h=true}})});a("a[rel=contact-hover],[rel=hover-popover]").live("mouseenter",function(n){n.preventDefault();var m=a(this);var e=setTimeout(function(){clearTimeout(j);hideActivePopovers(n);l=m.popover("show");d=true},500);m.data("timeoutDelayShow",e)}).live("mouseleave",function(e){clearTimeout(a(this).data("timeoutDelayShow"));j=setTimeout(function(){l.popover("hide");d=false},1000)});a("a[rel=widget-popover]").live("click",function(m){m.preventDefault();m.stopPropagation();clearTimeout(j);d=false;hideActivePopovers(m);l=a(this).popover("show")});a("#monitor").live("mouseenter",function(n){var m=a(this);var e=setTimeout(function(){clearTimeout(j);hideActivePopovers(n);a("#new_watcher_page").show()},500);m.data("timeoutDelayShow",e)}).live("mouseleave",function(e){clearTimeout(a(this).data("timeoutDelayShow"));j=setTimeout(function(){a("#new_watcher_page").hide()},1000)});a("#new_watcher_page").live("mouseenter",function(e){clearTimeout(f);clearTimeout(j)}).live("mouseleave",function(e){f=setTimeout(function(){a("#new_watcher_page").hide()},1000)});a("label.overlabel").livequery(function(){a(this).overlabel()});a(".nav-trigger").livequery(function(){a(this).showAsMenu()});a("input[rel=toggle]").livequery(function(){a(this).itoggle()});a("select.customSelect").livequery(function(){a(this).chosen()});a("select.select2").livequery(function(){a(this).select2(a(this).data())});a("div.request_mail").livequery(function(){quote_text(this)});a("input.datepicker").livequery(function(){a(this).datepicker(a(this).data())});a(".contact_tickets .detailed_view .quick-action").removeClass("dynamic-menu quick-action").attr("title","");a(".quick-action.ajax-menu").livequery(function(){a(this).showAsDynamicMenu()});a(".quick-action.dynamic-menu").livequery(function(){a(this).showAsDynamicMenu()});a(".tourmyapp-toolbar .tourmyapp-next_button").livequery(function(){if(a(this).text()=="Next "){a(this).addClass("next_button_arrow").text("Next")}});a("[rel=remote]").livequery(function(){a(this).bind("afterShow",function(m){var e=a(this);if(e.data("remoteUrl")){e.append("<div class='loading-box'></div>");e.load(e.data("remoteUrl"),function(){e.data("remoteUrl",false)})}})});a(".tooltip").twipsy({live:true});a(".form-tooltip").twipsy({live:true,trigger:"focus",template:'<div class="twipsy-arrow"></div><div class="twipsy-inner big"></div>'});a("input[type=checkbox].iphone").each(function(){var m=a(this);var n=m.attr("data-active-text")||"Yes";var e=m.attr("data-inactive-text")||"No";m.wrap('<div class="stylised iphone" />');m=m.parent();m.append('<span class="text">'+n+'</span><span class="other"></span>');m.children("input[type=checkbox]").addClass("hide");m.bind("click",function(o){o.preventDefault();o.stopPropagation();a(this).toggleClass("inactive");a(this).children(".text").text(a(this).hasClass("inactive")?e:n);if(a(this).hasClass("inactive")){a(this).children("input[type=checkbox]").removeAttr("checked")}else{a(this).children("input[type=checkbox]").attr("checked","checked")}})});var c={onkeyup:false,focusCleanup:true,focusInvalid:false,ignore:".nested_field:not(:visible), .portal_url:not(:visible)"};a("ul.ui-form, .cnt").livequery(function(e){a(this).not(".dont-validate").parents("form:first").validate(c)});a("div.ui-form").livequery(function(e){a(this).not(".dont-validate").find("form:first").validate(c)});a("form.ui-form").livequery(function(e){a(this).not(".dont-validate").validate(c)});c.submitHandler=function(m,e){a(e).button("loading");if(a(m).data("remote")){a(m).ajaxSubmit({dataType:"script",success:function(o,n){a(e).button("reset");a("#"+a(m).data("update")).html(o)}})}else{m.submit()}};a("form[rel=validate]").livequery(function(e){a(this).validate(c)});a(".single_click_link").live("click",function(e){if(!a(e.srcElement).is("a")){window.location=a(this).find("a").first().attr("href")}});a("input[rel=companion]").live({keyup:function(e){selector=a(this).data("companion");if(a(this).data("companionEmpty")){a(selector).val(this.value)}},focus:function(e){selector=a(this).data("companion");a(this).data("companionEmpty",(a(selector)&&a(selector).val().strip()===""))}});sidebarHeight=a("#Sidebar").height();if(sidebarHeight!==null&&sidebarHeight>a("#Pagearea").height()){a("#Pagearea").css("minHeight",sidebarHeight)}if(window.location.hash!=""){hash=window.location.hash.split("/");jQuery.each(hash,function(e,m){setTimeout(function(){catchException(function(){jQuery(m+"-tab").trigger("click")},"Error in File globalinit.js")},((e+1)*10))})}qtipPositions={normal:{my:"center right",at:"center left"},top:{my:"bottom center",at:"top center"},bottom:{my:"top center",at:"bottom center"},left:{my:"top left",at:"bottom  left"}};a(".custom-tip, .custom-tip-top, .custom-tip-left, .custom-tip-bottom").live("mouseenter",function(m){config_position=qtipPositions.normal;var e=jQuery(this).data("tip-classes")||"";if(a(this).hasClass("custom-tip-top")){config_position=qtipPositions.top}if(a(this).hasClass("custom-tip-bottom")){config_position=qtipPositions.bottom}if(a(this).hasClass("custom-tip-left")){config_position=qtipPositions.left}config_position.viewport=jQuery(window);a(this).qtip({overwrite:false,position:config_position,style:{classes:"ui-tooltip-rounded ui-tooltip-shadow "+e,tip:{mimic:"center"}},show:{event:m.type,ready:true,delay:300}},m)}).each(function(e){a.attr(this,"oldtitle",a.attr(this,"title"));this.removeAttribute("title")});menu_box_count=0;fd_active_drop_box=null;function b(){a(".nav-drop .menu-box").hide();a(".nav-drop .menu-trigger").removeClass("selected")}a(".nav-drop .menu-trigger").live("click",function(e){e.preventDefault();a(this).toggleClass("selected").next().toggle();if(!a(this).attr("data-menu-name")){a(this,a(this).next()).attr("data-menu-name","page_menu_"+menu_box_count++)}if(a(this).attr("data-menu-name")!==a(fd_active_drop_box).attr("data-menu-name")){a(fd_active_drop_box).removeClass("selected").next().hide()}fd_active_drop_box=a(this)});a("[rel=guided-tour]").live("click",function(m){m.preventDefault();try{tour.run(a(this).data("tour-id"),true)}catch(n){}});a(".nav-drop li.menu-item a").bind("click",function(){b()});a(document).bind("click",function(n){var m=a(n.target);if(!m.parents().hasClass("nav-drop")){b()}if(!m.parent().hasClass("request_form_options")){a("#canned_response_container").hide()}});flash=a("div.flash_info");if(flash.get(0)){try{closeableFlash(flash)}catch(g){}}if(jQuery.browser.opera){jQuery(".top-loading-strip").switchClass("top-loading-strip","top-loading-strip-opera")}a(document).pjax("a[data-pjax]",{timeout:-1,push:false,maxCacheLength:0,replace:true}).bind("pjax:beforeSend",function(p,o,m){jQuery(document).data("requestDone",false);jQuery(document).data("parallelData",undefined);start_time=new Date();jQuery("#cf_cache").remove();jQuery("#response_dialog").remove();jQuery(".ui-dialog").remove();jQuery("#bulkcontent").remove();var e=a("#body-container").height(),n=a(p.relatedTarget).parent();a("ul.header-tabs li.active").removeClass("active");n.addClass("active");jQuery(".top-loading-wrapper").switchClass("fadeOutRight","fadeInLeft",100,"easeInBounce",function(){jQuery(".top-loading-wrapper").removeClass("hide")});a(document).trigger("ticket_list");a(document).trigger("ticket_show");initParallelRequest(a(p.relatedTarget));if(jQuery("body").is(".ticket_details")){jQuery("body *").off("click.ticket_details");jQuery("body *").off("change.ticket_details");jQuery("body *").off("mouseover.ticket_details");jQuery("body *").off("mouseout.ticket_details");jQuery("body *").off("mouseenter.ticket_details");jQuery("body *").off("mouseleave.ticket_details");jQuery("body *").off("change.ticket_details");jQuery(window).off("unload.ticket_details");jQuery(window).off("scroll.ticket_details")}return true}).bind("pjax:end",function(o,n,m){jQuery(".popover").remove();jQuery(".top-loading-wrapper").switchClass("fadeInLeft","fadeOutRight");jQuery(".top-loading-wrapper").addClass("hide","slow");end_time=new Date();setTimeout(function(){a("#benchmarkresult").html("Finally This page took ::: <b>"+(end_time-start_time)/1000+" s</b> to load.")},10);jQuery(window).unbind(".pageless");var e=jQuery(document).data();jQuery(document).data("requestDone",true);if(e.parallelData&&a(o.relatedTarget).data()){a(a(o.relatedTarget).data().parallelPlaceholder).html(e.parallelData)}return true})})})(jQuery);function closeableFlash(a){a=jQuery(a);jQuery("<a />").addClass("close").attr("href","#").appendTo(a).click(function(b){a.fadeOut(600)});setTimeout(function(){if(a.css("display")!="none"){a.hide("blind",{},500)}},20000)}function initParallelRequest(b){if(!b.data("parallelUrl")){return}var a=b.data();jQuery.get(a.parallelUrl,function(c){if(jQuery(document).data("requestDone")){console.log("parent request done");jQuery(a.parallelPlaceholder).html(c)}else{console.log("parallel request done");jQuery(document).data("parallelData",c)}})}jQuery(document).ready(function(){var e,a=-1,c=false;currentString="";callbackToSearch=function(f,g){jQuery.ajax({url:g+f,success:function(h){if(f==$("header_search").value){$J("#SearchResultsBar").css("display","inline");a=-1;$J("#SearchResultsBar .results").html(h)}}})};$J("#SearchResultsBar a").live("click",function(){window.location=this.href});$J("#SearchResultsBar a").die("hover");$J("#SearchResultsBar a").live("hover",function(){$J(e).removeClass("active");e=$J(this).addClass("active")});$J("#SearchResultsBar").live({mouseenter:function(){c=true},mouseleave:function(){c=false}});$J("#header_search").bind("focusout",function(f){if(!c){$J("#SearchResultsBar").hide();$J("#SearchBar").removeClass("active")}});$J("#header_search").bind("focusin",function(f){searchString=this.value.replace(/^\s+|\s+$/g,"");$J("#SearchBar").addClass("active");if(searchString!=""){$J("#SearchResultsBar").css("display","inline")}});var b=function(f){searchlist=$J("#SearchResultsBar a");$J(e).removeClass("active");a=Math.min((searchlist.size()-1),Math.max(0,a+f));e=$J(searchlist.get(a)).addClass("active")};var d=function(f){switch(f){case 40:b(1);break;case 38:b(-1);break;case 13:$J(e).trigger("click");break}};$J("#header_search").bind("keyup",function(f){es_enabled=jQuery(f.target).data("esEnabled");switch(f.keyCode){case 40:case 38:case 13:d(f.keyCode);f.preventDefault();break;default:searchString=this.value.replace(/^\s+|\s+$/g,"");search_url=es_enabled?"/search/home/suggest?search_key=":"/search/suggest?search_key=";if(searchString!=""&&searchString.length>1&&currentString!=searchString){delay(function(){callbackToSearch(searchString,search_url);currentString=searchString},100)}else{jQuery("#SearchResultsBar").hide()}break}})});Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};Date.getMonthNumberFromName=function(b){var e=Date.CultureInfo.monthNames,a=Date.CultureInfo.abbreviatedMonthNames,d=b.toLowerCase();for(var c=0;c<e.length;c++){if(e[c].toLowerCase()==d||a[c].toLowerCase()==d){return c}}return -1};Date.getDayNumberFromName=function(b){var f=Date.CultureInfo.dayNames,a=Date.CultureInfo.abbreviatedDayNames,e=Date.CultureInfo.shortestDayNames,d=b.toLowerCase();for(var c=0;c<f.length;c++){if(f[c].toLowerCase()==d||a[c].toLowerCase()==d){return c}}return -1};Date.isLeapYear=function(a){return(((a%4===0)&&(a%100!==0))||(a%400===0))};Date.getDaysInMonth=function(a,b){return[31,(Date.isLeapYear(a)?29:28),31,30,31,30,31,31,30,31,30,31][b]};Date.getTimezoneOffset=function(a,b){return(b||false)?Date.CultureInfo.abbreviatedTimeZoneDST[a.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[a.toUpperCase()]};Date.getTimezoneAbbreviation=function(b,d){var c=(d||false)?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard,a;for(a in c){if(c[a]===b){return a}}return null};Date.prototype.clone=function(){return new Date(this.getTime())};Date.prototype.compareTo=function(a){if(isNaN(this)){throw new Error(this)}if(a instanceof Date&&!isNaN(a)){return(this>a)?1:(this<a)?-1:0}else{throw new TypeError(a)}};Date.prototype.equals=function(a){return(this.compareTo(a)===0)};Date.prototype.between=function(c,a){var b=this.getTime();return b>=c.getTime()&&b<=a.getTime()};Date.prototype.addMilliseconds=function(a){this.setMilliseconds(this.getMilliseconds()+a);return this};Date.prototype.addSeconds=function(a){return this.addMilliseconds(a*1000)};Date.prototype.addMinutes=function(a){return this.addMilliseconds(a*60000)};Date.prototype.addHours=function(a){return this.addMilliseconds(a*3600000)};Date.prototype.addDays=function(a){return this.addMilliseconds(a*86400000)};Date.prototype.addWeeks=function(a){return this.addMilliseconds(a*604800000)};Date.prototype.addMonths=function(a){var b=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+a);this.setDate(Math.min(b,this.getDaysInMonth()));return this};Date.prototype.addYears=function(a){return this.addMonths(a*12)};Date.prototype.add=function(b){if(typeof b=="number"){this._orient=b;return this}var a=b;if(a.millisecond||a.milliseconds){this.addMilliseconds(a.millisecond||a.milliseconds)}if(a.second||a.seconds){this.addSeconds(a.second||a.seconds)}if(a.minute||a.minutes){this.addMinutes(a.minute||a.minutes)}if(a.hour||a.hours){this.addHours(a.hour||a.hours)}if(a.month||a.months){this.addMonths(a.month||a.months)}if(a.year||a.years){this.addYears(a.year||a.years)}if(a.day||a.days){this.addDays(a.day||a.days)}return this};Date._validate=function(d,c,a,b){if(typeof d!="number"){throw new TypeError(d+" is not a Number.")}else{if(d<c||d>a){throw new RangeError(d+" is not a valid value for "+b+".")}}return true};Date.validateMillisecond=function(a){return Date._validate(a,0,999,"milliseconds")};Date.validateSecond=function(a){return Date._validate(a,0,59,"seconds")};Date.validateMinute=function(a){return Date._validate(a,0,59,"minutes")};Date.validateHour=function(a){return Date._validate(a,0,23,"hours")};Date.validateDay=function(c,a,b){return Date._validate(c,1,Date.getDaysInMonth(a,b),"days")};Date.validateMonth=function(a){return Date._validate(a,0,11,"months")};Date.validateYear=function(a){return Date._validate(a,1,9999,"seconds")};Date.prototype.set=function(b){var a=b;if(!a.millisecond&&a.millisecond!==0){a.millisecond=-1}if(!a.second&&a.second!==0){a.second=-1}if(!a.minute&&a.minute!==0){a.minute=-1}if(!a.hour&&a.hour!==0){a.hour=-1}if(!a.day&&a.day!==0){a.day=-1}if(!a.month&&a.month!==0){a.month=-1}if(!a.year&&a.year!==0){a.year=-1}if(a.millisecond!=-1&&Date.validateMillisecond(a.millisecond)){this.addMilliseconds(a.millisecond-this.getMilliseconds())}if(a.second!=-1&&Date.validateSecond(a.second)){this.addSeconds(a.second-this.getSeconds())}if(a.minute!=-1&&Date.validateMinute(a.minute)){this.addMinutes(a.minute-this.getMinutes())}if(a.hour!=-1&&Date.validateHour(a.hour)){this.addHours(a.hour-this.getHours())}if(a.month!==-1&&Date.validateMonth(a.month)){this.addMonths(a.month-this.getMonth())}if(a.year!=-1&&Date.validateYear(a.year)){this.addYears(a.year-this.getFullYear())}if(a.day!=-1&&Date.validateDay(a.day,this.getFullYear(),this.getMonth())){this.addDays(a.day-this.getDate())}if(a.timezone){this.setTimezone(a.timezone)}if(a.timezoneOffset){this.setTimezoneOffset(a.timezoneOffset)}return this};Date.prototype.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};Date.prototype.isLeapYear=function(){var a=this.getFullYear();return(((a%4===0)&&(a%100!==0))||(a%400===0))};Date.prototype.isWeekday=function(){return !(this.is().sat()||this.is().sun())};Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())};Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})};Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})};Date.prototype.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||+1))%7;return this.addDays((c===0)?c+=7*(b||+1):c)};Date.prototype.moveToMonth=function(c,a){var b=(c-this.getMonth()+12*(a||+1))%12;return this.addMonths((b===0)?b+=12*(a||+1):b)};Date.prototype.getDayOfYear=function(){return Math.floor((this-new Date(this.getFullYear(),0,1))/86400000)};Date.prototype.getWeekOfYear=function(a){var h=this.getFullYear(),c=this.getMonth(),f=this.getDate();var k=a||Date.CultureInfo.firstDayOfWeek;var e=7+1-new Date(h,0,1).getDay();if(e==8){e=1}var b=((Date.UTC(h,c,f,0,0,0)-Date.UTC(h,0,1,0,0,0))/86400000)+1;var j=Math.floor((b-e+7)/7);if(j===k){h--;var g=7+1-new Date(h,0,1).getDay();if(g==2||g==8){j=53}else{j=52}}return j};Date.prototype.isDST=function(){return this.toString().match(/(E|C|M|P)(S|D)T/)[2]=="D"};Date.prototype.getTimezone=function(){return Date.getTimezoneAbbreviation(this.getUTCOffset,this.isDST())};Date.prototype.setTimezoneOffset=function(b){var a=this.getTimezoneOffset(),c=Number(b)*-6/10;this.addMinutes(c-a);return this};Date.prototype.setTimezone=function(a){return this.setTimezoneOffset(Date.getTimezoneOffset(a))};Date.prototype.getUTCOffset=function(){var b=this.getTimezoneOffset()*-10/6,a;if(b<0){a=(b-10000).toString();return a[0]+a.substr(2)}else{a=(b+10000).toString();return"+"+a.substr(1)}};Date.prototype.getDayName=function(a){return a?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()]};Date.prototype.getMonthName=function(a){return a?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()]};if(Date.prototype._toString==undefined){Date.prototype._toString=Date.prototype.toString}Date.prototype.toString=function(c){var a=this;var b=function b(d){return(d.toString().length==1)?"0"+d:d};return c?c.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(d){switch(d){case"hh":return b(a.getHours()<13?a.getHours():(a.getHours()-12));case"h":return a.getHours()<13?a.getHours():(a.getHours()-12);case"HH":return b(a.getHours());case"H":return a.getHours();case"mm":return b(a.getMinutes());case"m":return a.getMinutes();case"ss":return b(a.getSeconds());case"s":return a.getSeconds();case"yyyy":return a.getFullYear();case"yy":return a.getFullYear().toString().substring(2,4);case"dddd":return a.getDayName();case"ddd":return a.getDayName(true);case"dd":return b(a.getDate());case"d":return a.getDate().toString();case"MMMM":return a.getMonthName();case"MMM":return a.getMonthName(true);case"MM":return b((a.getMonth()+1));case"M":return a.getMonth()+1;case"t":return a.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return a.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString()};Date.now=function(){return new Date()};Date.today=function(){return Date.now().clearTime()};Date.prototype._orient=+1;Date.prototype.next=function(){this._orient=+1;return this};Date.prototype.last=Date.prototype.prev=Date.prototype.previous=function(){this._orient=-1;return this};Date.prototype._is=false;Date.prototype.is=function(){this._is=true;return this};Number.prototype._dateElement="day";Number.prototype.fromNow=function(){var a={};a[this._dateElement]=this;return Date.now().add(a)};Number.prototype.ago=function(){var a={};a[this._dateElement]=this*-1;return Date.now().add(a)};(function(){var g=Date.prototype,a=Number.prototype;var p=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),o=("january february march april may june july august september october november december").split(/\s/),n=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),m;var l=function(j){return function(){if(this._is){this._is=false;return this.getDay()==j}return this.moveToDayOfWeek(j,this._orient)}};for(var f=0;f<p.length;f++){g[p[f]]=g[p[f].substring(0,3)]=l(f)}var h=function(j){return function(){if(this._is){this._is=false;return this.getMonth()===j}return this.moveToMonth(j,this._orient)}};for(var d=0;d<o.length;d++){g[o[d]]=g[o[d].substring(0,3)]=h(d)}var e=function(k){return function(){if(k.substring(k.length-1)!="s"){k+="s"}return this["add"+k](this._orient)}};var b=function(j){return function(){this._dateElement=j;return this}};for(var c=0;c<n.length;c++){m=n[c].toLowerCase();g[m]=g[m+"s"]=e(n[c]);a[m]=a[m+"s"]=b(m)}}());Date.prototype.toJSONString=function(){return this.toString("yyyy-MM-ddThh:mm:ssZ")};Date.prototype.toShortDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern)};Date.prototype.toLongDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.longDatePattern)};Date.prototype.toShortTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern)};Date.prototype.toLongTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.longTimePattern)};Date.prototype.getOrdinal=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};(function(){Date.Parsing={Exception:function(j){this.message="Parse error at '"+j.substring(0,10)+" ...'"}};var a=Date.Parsing;var c=a.Operators={rtoken:function(j){return function(k){var l=k.match(j);if(l){return([l[0],k.substring(l[0].length)])}else{throw new a.Exception(k)}}},token:function(j){return function(k){return c.rtoken(new RegExp("^s*"+k+"s*"))(k)}},stoken:function(j){return c.rtoken(new RegExp("^"+j))},until:function(j){return function(k){var l=[],n=null;while(k.length){try{n=j.call(this,k)}catch(m){l.push(n[0]);k=n[1];continue}break}return[l,k]}},many:function(j){return function(k){var n=[],l=null;while(k.length){try{l=j.call(this,k)}catch(m){return[n,k]}n.push(l[0]);k=l[1]}return[n,k]}},optional:function(j){return function(k){var l=null;try{l=j.call(this,k)}catch(m){return[null,k]}return[l[0],l[1]]}},not:function(j){return function(k){try{j.call(this,k)}catch(l){return[null,k]}throw new a.Exception(k)}},ignore:function(j){return j?function(k){var l=null;l=j.call(this,k);return[null,l[1]]}:null},product:function(){var k=arguments[0],l=Array.prototype.slice.call(arguments,1),m=[];for(var j=0;j<k.length;j++){m.push(c.each(k[j],l))}return m},cache:function(l){var j={},k=null;return function(m){try{k=j[m]=(j[m]||l.call(this,m))}catch(n){k=j[m]=n}if(k instanceof a.Exception){throw k}else{return k}}},any:function(){var j=arguments;return function(l){var m=null;for(var k=0;k<j.length;k++){if(j[k]==null){continue}try{m=(j[k].call(this,l))}catch(n){m=null}if(m){return m}}throw new a.Exception(l)}},each:function(){var j=arguments;return function(l){var o=[],m=null;for(var k=0;k<j.length;k++){if(j[k]==null){continue}try{m=(j[k].call(this,l))}catch(n){throw new a.Exception(l)}o.push(m[0]);l=m[1]}return[o,l]}},all:function(){var k=arguments,j=j;return j.each(j.optional(k))},sequence:function(j,k,l){k=k||c.rtoken(/^\s*/);l=l||null;if(j.length==1){return j[0]}return function(p){var t=null,u=null;var w=[];for(var o=0;o<j.length;o++){try{t=j[o].call(this,p)}catch(v){break}w.push(t[0]);try{u=k.call(this,t[1])}catch(n){u=null;break}p=u[1]}if(!t){throw new a.Exception(p)}if(u){throw new a.Exception(u[1])}if(l){try{t=l.call(this,t[1])}catch(m){throw new a.Exception(t[1])}}return[w,(t?t[1]:p)]}},between:function(k,l,j){j=j||k;var m=c.each(c.ignore(k),l,c.ignore(j));return function(n){var o=m.call(this,n);return[[o[0][0],r[0][2]],o[1]]}},list:function(j,k,l){k=k||c.rtoken(/^\s*/);l=l||null;return(j instanceof Array?c.each(c.product(j.slice(0,-1),c.ignore(k)),j.slice(-1),c.ignore(l)):c.each(c.many(c.each(j,c.ignore(k))),px,c.ignore(l)))},set:function(j,k,l){k=k||c.rtoken(/^\s*/);l=l||null;return function(C){var m=null,o=null,n=null,t=null,u=[[],C],B=false;for(var w=0;w<j.length;w++){n=null;o=null;m=null;B=(j.length==1);try{m=j[w].call(this,C)}catch(z){continue}t=[[m[0]],m[1]];if(m[1].length>0&&!B){try{n=k.call(this,m[1])}catch(A){B=true}}else{B=true}if(!B&&n[1].length===0){B=true}if(!B){var x=[];for(var v=0;v<j.length;v++){if(w!=v){x.push(j[v])}}o=c.set(x,k).call(this,n[1]);if(o[0].length>0){t[0]=t[0].concat(o[0]);t[1]=o[1]}}if(t[1].length<u[1].length){u=t}if(u[1].length===0){break}}if(u[0].length===0){return u}if(l){try{n=l.call(this,u[1])}catch(y){throw new a.Exception(u[1])}u[1]=n[1]}return u}},forward:function(j,k){return function(l){return j[k].call(this,l)}},replace:function(k,j){return function(l){var m=k.call(this,l);return[j,m[1]]}},process:function(k,j){return function(l){var m=k.call(this,l);return[j.call(this,m[0]),m[1]]}},min:function(j,k){return function(l){var m=k.call(this,l);if(m[0].length<j){throw new a.Exception(l)}return m}}};var h=function(j){return function(){var k=null,n=[];if(arguments.length>1){k=Array.prototype.slice.call(arguments)}else{if(arguments[0] instanceof Array){k=arguments[0]}}if(k){for(var m=0,l=k.shift();m<l.length;m++){k.unshift(l[m]);n.push(j.apply(null,k));k.shift();return n}}else{return j.apply(null,arguments)}}};var g="optional not ignore cache".split(/\s/);for(var d=0;d<g.length;d++){c[g[d]]=h(c[g[d]])}var f=function(j){return function(){if(arguments[0] instanceof Array){return j.apply(null,arguments[0])}else{return j.apply(null,arguments)}}};var e="each any all".split(/\s/);for(var b=0;b<e.length;b++){c[e[b]]=f(c[e[b]])}}());(function(){var f=function(k){var l=[];for(var g=0;g<k.length;g++){if(k[g] instanceof Array){l=l.concat(f(k[g]))}else{if(k[g]){l.push(k[g])}}}return l};Date.Grammar={};Date.Translator={hour:function(g){return function(){this.hour=Number(g)}},minute:function(g){return function(){this.minute=Number(g)}},second:function(g){return function(){this.second=Number(g)}},meridian:function(g){return function(){this.meridian=g.slice(0,1).toLowerCase()}},timezone:function(g){return function(){var k=g.replace(/[^\d\+\-]/g,"");if(k.length){this.timezoneOffset=Number(k)}else{this.timezone=g.toLowerCase()}}},day:function(g){var k=g[0];return function(){this.day=Number(k.match(/\d+/)[0])}},month:function(g){return function(){this.month=((g.length==3)?Date.getMonthNumberFromName(g):(Number(g)-1))}},year:function(g){return function(){var k=Number(g);this.year=((g.length>2)?k:(k+(((k+2000)<Date.CultureInfo.twoDigitYearMax)?2000:1900)))}},rday:function(g){return function(){switch(g){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break}}},finishExact:function(g){g=(g instanceof Array)?g:[g];var k=new Date();this.year=k.getFullYear();this.month=k.getMonth();this.day=1;this.hour=0;this.minute=0;this.second=0;for(var l=0;l<g.length;l++){if(g[l]){g[l].call(this)}}this.hour=(this.meridian=="p"&&this.hour<13)?this.hour+12:this.hour;if(this.day>Date.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.")}var m=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){m.set({timezone:this.timezone})}else{if(this.timezoneOffset){m.set({timezoneOffset:this.timezoneOffset})}}return m},finish:function(g){g=(g instanceof Array)?f(g):[g];if(g.length===0){return null}for(var n=0;n<g.length;n++){if(typeof g[n]=="function"){g[n].call(this)}}if(this.now){return new Date()}var k=Date.today();var q=null;var o=!!(this.days!=null||this.orient||this.operator);if(o){var p,m,l;l=((this.orient=="past"||this.operator=="subtract")?-1:1);if(this.weekday){this.unit="day";p=(Date.getDayNumberFromName(this.weekday)-k.getDay());m=7;this.days=p?((p+(l*m))%m):(l*m)}if(this.month){this.unit="month";p=(this.month-k.getMonth());m=12;this.months=p?((p+(l*m))%m):(l*m);this.month=null}if(!this.unit){this.unit="day"}if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1}if(this.unit=="week"){this.unit="day";this.value=this.value*7}this[this.unit+"s"]=this.value*l}return k.add(this)}else{if(this.meridian&&this.hour){this.hour=(this.hour<13&&this.meridian=="p")?this.hour+12:this.hour}if(this.weekday&&!this.day){this.day=(k.addDays((Date.getDayNumberFromName(this.weekday)-k.getDay()))).getDate()}if(this.month&&!this.day){this.day=1}return k.set(this)}}};var b=Date.Parsing.Operators,e=Date.Grammar,d=Date.Translator,j;e.datePartDelimiter=b.rtoken(/^([\s\-\.\,\/\x27]+)/);e.timePartDelimiter=b.stoken(":");e.whiteSpace=b.rtoken(/^\s*/);e.generalDelimiter=b.rtoken(/^(([\s\,]|at|on)+)/);var a={};e.ctoken=function(n){var m=a[n];if(!m){var o=Date.CultureInfo.regexPatterns;var l=n.split(/\s+/),k=[];for(var g=0;g<l.length;g++){k.push(b.replace(b.rtoken(o[l[g]]),l[g]))}m=a[n]=b.any.apply(null,k)}return m};e.ctoken2=function(g){return b.rtoken(Date.CultureInfo.regexPatterns[g])};e.h=b.cache(b.process(b.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),d.hour));e.hh=b.cache(b.process(b.rtoken(/^(0[0-9]|1[0-2])/),d.hour));e.H=b.cache(b.process(b.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),d.hour));e.HH=b.cache(b.process(b.rtoken(/^([0-1][0-9]|2[0-3])/),d.hour));e.m=b.cache(b.process(b.rtoken(/^([0-5][0-9]|[0-9])/),d.minute));e.mm=b.cache(b.process(b.rtoken(/^[0-5][0-9]/),d.minute));e.s=b.cache(b.process(b.rtoken(/^([0-5][0-9]|[0-9])/),d.second));e.ss=b.cache(b.process(b.rtoken(/^[0-5][0-9]/),d.second));e.hms=b.cache(b.sequence([e.H,e.mm,e.ss],e.timePartDelimiter));e.t=b.cache(b.process(e.ctoken2("shortMeridian"),d.meridian));e.tt=b.cache(b.process(e.ctoken2("longMeridian"),d.meridian));e.z=b.cache(b.process(b.rtoken(/^(\+|\-)?\s*\d\d\d\d?/),d.timezone));e.zz=b.cache(b.process(b.rtoken(/^(\+|\-)\s*\d\d\d\d/),d.timezone));e.zzz=b.cache(b.process(e.ctoken2("timezone"),d.timezone));e.timeSuffix=b.each(b.ignore(e.whiteSpace),b.set([e.tt,e.zzz]));e.time=b.each(b.optional(b.ignore(b.stoken("T"))),e.hms,e.timeSuffix);e.d=b.cache(b.process(b.each(b.rtoken(/^([0-2]\d|3[0-1]|\d)/),b.optional(e.ctoken2("ordinalSuffix"))),d.day));e.dd=b.cache(b.process(b.each(b.rtoken(/^([0-2]\d|3[0-1])/),b.optional(e.ctoken2("ordinalSuffix"))),d.day));e.ddd=e.dddd=b.cache(b.process(e.ctoken("sun mon tue wed thu fri sat"),function(g){return function(){this.weekday=g}}));e.M=b.cache(b.process(b.rtoken(/^(1[0-2]|0\d|\d)/),d.month));e.MM=b.cache(b.process(b.rtoken(/^(1[0-2]|0\d)/),d.month));e.MMM=e.MMMM=b.cache(b.process(e.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),d.month));e.y=b.cache(b.process(b.rtoken(/^(\d\d?)/),d.year));e.yy=b.cache(b.process(b.rtoken(/^(\d\d)/),d.year));e.yyy=b.cache(b.process(b.rtoken(/^(\d\d?\d?\d?)/),d.year));e.yyyy=b.cache(b.process(b.rtoken(/^(\d\d\d\d)/),d.year));j=function(){return b.each(b.any.apply(null,arguments),b.not(e.ctoken2("timeContext")))};e.day=j(e.d,e.dd);e.month=j(e.M,e.MMM);e.year=j(e.yyyy,e.yy);e.orientation=b.process(e.ctoken("past future"),function(g){return function(){this.orient=g}});e.operator=b.process(e.ctoken("add subtract"),function(g){return function(){this.operator=g}});e.rday=b.process(e.ctoken("yesterday tomorrow today now"),d.rday);e.unit=b.process(e.ctoken("minute hour day week month year"),function(g){return function(){this.unit=g}});e.value=b.process(b.rtoken(/^\d\d?(st|nd|rd|th)?/),function(g){return function(){this.value=g.replace(/\D/g,"")}});e.expression=b.set([e.rday,e.operator,e.value,e.unit,e.orientation,e.ddd,e.MMM]);j=function(){return b.set(arguments,e.datePartDelimiter)};e.mdy=j(e.ddd,e.month,e.day,e.year);e.ymd=j(e.ddd,e.year,e.month,e.day);e.dmy=j(e.ddd,e.day,e.month,e.year);e.date=function(g){return((e[Date.CultureInfo.dateElementOrder]||e.mdy).call(this,g))};e.format=b.process(b.many(b.any(b.process(b.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(g){if(e[g]){return e[g]}else{throw Date.Parsing.Exception(g)}}),b.process(b.rtoken(/^[^dMyhHmstz]+/),function(g){return b.ignore(b.stoken(g))}))),function(g){return b.process(b.each.apply(null,g),d.finishExact)});var h={};var c=function(g){return h[g]=(h[g]||e.format(g)[0])};e.formats=function(k){if(k instanceof Array){var l=[];for(var g=0;g<k.length;g++){l.push(c(k[g]))}return b.any.apply(null,l)}else{return c(k)}};e._formats=e.formats(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]);e._start=b.process(b.set([e.date,e.time,e.expression],e.generalDelimiter,e.whiteSpace),d.finish);e.start=function(g){try{var k=e._formats.call({},g);if(k[1].length===0){return k}}catch(l){}return e._start.call({},g)}}());Date._parse=Date.parse;Date.parse=function(a){var b=null;if(!a){return null}try{b=Date.Grammar.start.call({},a)}catch(c){return null}return((b[1].length===0)?b[0]:null)};Date.getParseFunction=function(b){var a=Date.Grammar.formats(b);return function(c){var d=null;try{d=a.call({},c)}catch(f){return null}return((d[1].length===0)?d[0]:null)}};Date.parseExact=function(a,b){return Date.getParseFunction(b)(a)};var TimeSpan=function(m,h,e,j,d){var l="days hours minutes seconds milliseconds".split(/\s+/);var c=function(n){return function(){return this[n]}};var k=function(n){return function(o){this[n]=o;return this}};for(var g=0;g<l.length;g++){var b=l[g],a=b.slice(0,1).toUpperCase()+b.slice(1);TimeSpan.prototype[b]=0;TimeSpan.prototype["get"+a]=c(b);TimeSpan.prototype["set"+a]=k(b)}if(arguments.length==4){this.setDays(m);this.setHours(h);this.setMinutes(e);this.setSeconds(j)}else{if(arguments.length==5){this.setDays(m);this.setHours(h);this.setMinutes(e);this.setSeconds(j);this.setMilliseconds(d)}else{if(arguments.length==1&&typeof m=="number"){var f=(m<0)?-1:+1;this.setMilliseconds(Math.abs(m));this.setDays(Math.floor(this.getMilliseconds()/86400000)*f);this.setMilliseconds(this.getMilliseconds()%86400000);this.setHours(Math.floor(this.getMilliseconds()/3600000)*f);this.setMilliseconds(this.getMilliseconds()%3600000);this.setMinutes(Math.floor(this.getMilliseconds()/60000)*f);this.setMilliseconds(this.getMilliseconds()%60000);this.setSeconds(Math.floor(this.getMilliseconds()/1000)*f);this.setMilliseconds(this.getMilliseconds()%1000);this.setMilliseconds(this.getMilliseconds()*f)}}}this.getTotalMilliseconds=function(){return(this.getDays()*86400000)+(this.getHours()*3600000)+(this.getMinutes()*60000)+(this.getSeconds()*1000)};this.compareTo=function(p){var o=new Date(1970,1,1,this.getHours(),this.getMinutes(),this.getSeconds()),n;if(p===null){n=new Date(1970,1,1,0,0,0)}else{n=new Date(1970,1,1,p.getHours(),p.getMinutes(),p.getSeconds())}return(o<n)?-1:(o>n)?1:0};this.equals=function(n){return(this.compareTo(n)===0)};this.add=function(n){return(n===null)?this:this.addSeconds(n.getTotalMilliseconds()/1000)};this.subtract=function(n){return(n===null)?this:this.addSeconds(-n.getTotalMilliseconds()/1000)};this.addDays=function(o){return new TimeSpan(this.getTotalMilliseconds()+(o*86400000))};this.addHours=function(o){return new TimeSpan(this.getTotalMilliseconds()+(o*3600000))};this.addMinutes=function(o){return new TimeSpan(this.getTotalMilliseconds()+(o*60000))};this.addSeconds=function(o){return new TimeSpan(this.getTotalMilliseconds()+(o*1000))};this.addMilliseconds=function(o){return new TimeSpan(this.getTotalMilliseconds()+o)};this.get12HourHour=function(){return(this.getHours()>12)?this.getHours()-12:(this.getHours()===0)?12:this.getHours()};this.getDesignator=function(){return(this.getHours()<12)?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator};this.toString=function(o){this._toString=function(){if(this.getDays()!==null&&this.getDays()>0){return this.getDays()+"."+this.getHours()+":"+this.p(this.getMinutes())+":"+this.p(this.getSeconds())}else{return this.getHours()+":"+this.p(this.getMinutes())+":"+this.p(this.getSeconds())}};this.p=function(p){return(p.toString().length<2)?"0"+p:p};var n=this;return o?o.replace(/dd?|HH?|hh?|mm?|ss?|tt?/g,function(p){switch(p){case"d":return n.getDays();case"dd":return n.p(n.getDays());case"H":return n.getHours();case"HH":return n.p(n.getHours());case"h":return n.get12HourHour();case"hh":return n.p(n.get12HourHour());case"m":return n.getMinutes();case"mm":return n.p(n.getMinutes());case"s":return n.getSeconds();case"ss":return n.p(n.getSeconds());case"t":return((n.getHours()<12)?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator).substring(0,1);case"tt":return(n.getHours()<12)?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator}}):this._toString()};return this};Date.prototype.getTimeOfDay=function(){return new TimeSpan(0,this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds())};var TimePeriod=function(n,f,e,q,o,k,g){var m="years months days hours minutes seconds milliseconds".split(/\s+/);var j=function(v){return function(){return this[v]}};var b=function(v){return function(w){this[v]=w;return this}};for(var p=0;p<m.length;p++){var d=m[p],c=d.slice(0,1).toUpperCase()+d.slice(1);TimePeriod.prototype[d]=0;TimePeriod.prototype["get"+c]=j(d);TimePeriod.prototype["set"+c]=b(d)}if(arguments.length==7){this.years=n;this.months=f;this.setDays(e);this.setHours(q);this.setMinutes(o);this.setSeconds(k);this.setMilliseconds(g)}else{if(arguments.length==2&&arguments[0] instanceof Date&&arguments[1] instanceof Date){var u=n.clone();var t=f.clone();var s=u.clone();var h=(u>t)?-1:+1;this.years=t.getFullYear()-u.getFullYear();s.addYears(this.years);if(h==+1){if(s>t){if(this.years!==0){this.years--}}}else{if(s<t){if(this.years!==0){this.years++}}}u.addYears(this.years);if(h==+1){while(u<t&&u.clone().addDays(Date.getDaysInMonth(u.getYear(),u.getMonth()))<t){u.addMonths(1);this.months++}}else{while(u>t&&u.clone().addDays(-u.getDaysInMonth())>t){u.addMonths(-1);this.months--}}var l=t-u;if(l!==0){var a=new TimeSpan(l);this.setDays(a.getDays());this.setHours(a.getHours());this.setMinutes(a.getMinutes());this.setSeconds(a.getSeconds());this.setMilliseconds(a.getMilliseconds())}}}return this};