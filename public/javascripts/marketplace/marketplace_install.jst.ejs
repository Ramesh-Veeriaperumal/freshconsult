<% if (platform_version == '2.0') { %>
  <script>
    mkp.set("<%= extension_id %>", "<%= version_id %>")
  </script>
<% } %>

<div id="app-window" class="container fa-installer fa-bg">

  <div id="fa-nav" class="fa-sidehead">
    <div class="fa-breadcumb">
      <a class="backbtn" href="#" data-url="<%= back_url %>"><span class="ficon-left-arrow-thick fsize-12"></span></a>
    </div>
  </div>


  <div class="fa-hmeta head-spacer">
    <h3 class="app-name">
      <span class="status">
        <% if(installation_type == "settings" && install_btn['has_oauth_iparams']) { %>
          <span style="font-weight: 400;"><%= translate.get('reauthorize_header') %></span>
        <% } else if (installation_type == "settings") { %>
          <%= translate.get('install_setting') %>:
        <% } else { %>
          <%= translate.get('install_txt') %>:
        <% } %>
      </span>
      <% if(installation_type == "settings" && install_btn['has_oauth_iparams']) { %>
      <% } else { %>
        <span> <%- display_name %></span>
      <% } %>
    </h3>
    <div class="progress progress-striped active" style="display:none;">
      <div class="bar bar-success" style="width:20%;"></div>
    </div>
  </div>


  <div id="install-error" style="display:none;" class="alert alert-danger">
  </div>
  <div id="install-success" style="display:none;" class="alert alert-notice">
  </div>


  <div class="row-fluid fa-settings installing-text" style="display:none;">
    <div class="span12">
      <h4 class="status text-center"><%= translate.get('installing_text') %> </h4>
    </div>
  </div>

  <div class="row-fluid fa-settings install-form">
    <div class="span10 fa-info">
      <% if (installation_type != "settings" && !install_btn['has_oauth_iparams']) { %>
        <h4 class="install-status"><%= translate.get('install_almost_done') %></h4>
      <% } %>
      <% if (installation_type == "settings" && install_btn['has_oauth_iparams']) { %>
        <p style="font-weight: 100;"><%= translate.get('reauthorize_oauth_app') %></p>
      <% } %>

      <% if (platform_version == '2.0' && configs_page) { %>
        <!-- V2 Configs Form -->
        <div class="configs-form">
          <%= configs_page %>
        </div>
      <% } else if (platform_version == '1.0' && configs.length > 0) { %>
        <!-- V1 Configs Form -->
        <%=JST['marketplace/marketplace_configs_v1']({configs: configs}) %>
      <% } else { %>
        <!-- No Configs -->
        <p> <%= translate.get('no_configs') %> </p>
      <% } %>
    </div>


    <div class="span10 button-container text-left">
      <!-- TODO: Show Terms of use after 2.0 launch
        <% if (installation_type == 'install') { %>
          <p class="install-note"><%= translate.get('marketplace_agree') %>
            <a href="<%= translate.get('marketplace_terms') %>" target="_blank" class="read-more"><%= translate.get('mkp_terms_of_use') %></a>.
          </p>
        <% } %>
      -->
  
      <button class="col-md-6 btn btn-primary <%= install_btn['install_button'] %>" data-url="<%= install_btn['url'] %>" data-method="<%= install_btn['method'] %>" data-oauth-iparams="<%= install_btn['has_oauth_iparams']%>" data-platform-version="<%= platform_version %>"> <%= install_btn['text'] %></button>
      <button class="cancel_btn btn btn-default" style="margin-left: 10px;" data-url="<%= back_url %>"><%= translate.get('cancel') %></button>
    </div>

  </div>

</div>
