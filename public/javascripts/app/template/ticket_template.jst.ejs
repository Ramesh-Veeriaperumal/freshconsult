<%
	var trimTitle = function(title){
		if(title && title.length > 70){
			title =  title.substring(0,70) + "...";
		}
		return escapeHtml(title);
	}
%>

<% if (data) { %>

  <% if (data.recent_templates && data.recent_templates.length > 0) { %>
		<% if (data.all_acc_templates.length !== 0) { %>
    <div class="recent">Recent Templates</div>
		<% } %>
    <% for (var i = 0; i < data.recent_templates.length; i++) { %>
      <% if (i === data.recent_templates.length - 1 ){%>
        <li class="tkt-tmpl recent-tmpl last" data-id="<%= data.recent_templates[i].id %>"><%= trimTitle(data.recent_templates[i].name) %></li>
      <% } else {%>
        <li class="tkt-tmpl recent-tmpl" data-id="<%= data.recent_templates[i].id %>"><%= trimTitle(data.recent_templates[i].name) %></li>
      <% } %>
    <% } %>
    <% if (data.all_acc_templates && data.all_acc_templates.length > 0) { %>
      <div class="seperator"></div>
    <% } %>
  <% } %>

  <% if (data.all_acc_templates && data.all_acc_templates.length > 0) { %>
  <% for (var i = 0; i < data.all_acc_templates.length; i++) { %>
    <li class="tkt-tmpl" data-id="<%= data.all_acc_templates[i].id %>"><%= trimTitle(data.all_acc_templates[i].name) %></li>
  <% } %>
  <% } %>

  <% if (data.event === 'search' && data.all_acc_templates.length === 0) { %>
    <div class="no-template">No matching templates</div>
  <% } %>

  <% if (data.all_acc_templates && data.all_acc_templates.length === 0 && data.recent_templates && data.recent_templates.length === 0) { %>
      <p class="no-template-link"> No template has been created</p>
      <% if (data.previlage && data.previlage === 'true' && data.istmplAvailable && data.istmplAvailable === 'true') { %>
        <a class="create-template" data-pjax="#body-container" href="/helpdesk/ticket_templates/new">Create template</a>
      <% } %>
  <% } %>

<% } %>
