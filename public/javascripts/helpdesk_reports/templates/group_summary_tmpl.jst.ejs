<%
	var tableTrClass = function (i) {
		if (i % 2 == 0) { 
			return 'even'; 
		} else{ 
			return 'odd';
		}
	};

	var groupTdTmpl = function (data, i, j, group_metrics) {
		var metric_data, td_class,tooltip_tmpl = "";
		var current_data = data[i][group_metrics[j]];
		var enable_tooltip = false;
		
		if(consts.sla_metrics.indexOf(group_metrics[j]) > -1 && !HelpdeskReports.locals.is_sla_management_enabled  ) {
			return "";
		}

		if (consts.percentage_metrics.indexOf(group_metrics[j]) > -1) {
			metric_data = HelpdeskReports.CoreUtil.addsuffix(current_data);
			td_class = (typeof current_data !== 'number') ? 'disable' : ( HelpdeskReports.locals.enable_ticket_list ? '' : 'disable');
		} else if (consts.time_metrics.indexOf(group_metrics[j]) > -1) { 
			metric_data = HelpdeskReports.CoreUtil.timeMetricConversion(current_data);
			td_class = 'disable';
		} else { 
			metric_data = HelpdeskReports.CoreUtil.shortenLargeNumber(current_data, 1);
			td_class = (typeof current_data !== 'number') ? 'disable' : ( HelpdeskReports.locals.enable_ticket_list ? '' : 'disable');
			enable_tooltip = true;
		}

		var tmpl =  "<td data-group-id=" + data[i]['group_id'] + " class='" + td_class + "' data-metric-name=" + group_metrics[j];
		tmpl += " data-order = '" + current_data + "'";
		tmpl += tooltip_tmpl;
		tmpl += ">";
		if(enable_tooltip && current_data > 9999) {
			tmpl += '<span class="tooltip" data-placement="above" data-original-title="'+ current_data +'" twipsy-content-set="true">' + metric_data + '</span>';
		} else {
			tmpl += metric_data;
		}

		tmpl += "</td>";
		return tmpl;
	};

	var consts = jQuery.extend({}, HelpdeskReports.Constants.GroupSummary);
	var group_metrics = HelpdeskReports.Constants.GroupSummary.metrics;
	if(HelpdeskReports.locals.is_new_ticket_recieved_metric_enabled){
		var index = group_metrics.indexOf('GROUP_ASSIGNED_TICKETS');
	    if (index > -1) {
	       group_metrics.splice(index, 1);
	    }
	}else{
		var index = group_metrics.indexOf('GROUP_RECEIVED_TICKETS');
	    if (index > -1) {
	       group_metrics.splice(index, 1);
	    }
	}
%>

<%if (data && data.length>0) { %>
	<% for (var i = 0; i < data.length; i++) { %>
		<tr class="<%= tableTrClass(i) %>">
			<td data-group-id="<%= data[i]['group_id'] %>" class="disable group"><%= data[i]['group_name'] %></td>
			<% for (var j = 0; j < group_metrics.length; j++) { %>
				<% var summary_tmpl = groupTdTmpl(data, i, j, group_metrics); %>
					<%= summary_tmpl%>
			<% } %> 
		</tr>
	<% } %>
<% } %>