<% javascript_tag do -%>		
	function getCannedResponse(ticket_id,ca_resp_id){
	  jQuery("#canned_response_list").addClass("loading")
		jQuery.ajax({	type: 'POST',
						url: '/helpdesk/tickets/get_ca_response_content/'+ticket_id+'?ca_resp_id='+ca_resp_id,
						contentType: 'application/text',
						async: false,						
						success: function(data){		
									insertIntoConversation(data);
							    jQuery("#canned_response_list")
							      .removeClass("loading")
							      .hide(300);
								}
						});
		return true;
	}
<%- end %>
<div class="canned-response-menu" id="canned_response_list" style="display:none"> 
  <ul>
    <span class="divider"></span>
	  <%
      my_ca_resp = current_account.canned_responses.my_canned_responses(current_user)
      my_ca_resp.each do |ca_response|
    %>
      <li class="menu-item">
        <span class="bullet"></span>
        <%= link_to_function truncate(ca_response.title, :length => 35), "getCannedResponse('#{@ticket.display_id}','#{ca_response.id}')", :title => t(:'ticket.canned_responses.insert_ca_resp_tip') %>
      </li>
    <% end %>
  </ul>
</div>