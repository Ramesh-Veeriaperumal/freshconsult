<% form_disable = params[:format] == 'widget' ? {:onsubmit=> 'return false'} : {} %>
<%= form_for @ticket,
:url => url_for(:controller => "helpdesk/tickets", :action => "update_ticket_properties", :id => @ticket.display_id), :html => { :id => 'custom_ticket_form', :class => 'ui-form content dont-validate'}.merge(form_disable) do |f| %>

	<% if privilege?(:edit_ticket_properties) %>
		<div class="button-container top">
			<%= f.submit t('update'), :class => "btn btn-primary", :id => "helpdesk_ticket_submit_dup",
			"data-loading-text" => "#{t('ticket.updating')}...", 
			"data-saved-text" => "✔ #{t('ticket.update_done')}", 
		
			"data-default-text" => t('update') %>
		</div>
	<% end %>
	<ul class="cnt dont-validate" id="TicketPropertiesFields">

		<!--form values starts here-->
		<%= render :partial => '/helpdesk/tickets/show/ticket_field_elements', 
									:locals => {:form_builder => f, :ticket => @item} %>
		<!--form values ends here-->
		<!-- Custom fields ends here-->
	</ul>
	<%= hidden_field_tag 'send_and_set', 'true', disabled: true %>
	<% if privilege?(:edit_ticket_properties) %>
		<div class="button-container">
			<%= f.submit t('update'), :class => "btn btn-primary", :id => "helpdesk_ticket_submit",
			"data-loading-text" => "#{t('ticket.updating')}...", 
			"data-saved-text" => "✔ #{t('ticket.update_done')}", 
		
			"data-default-text" => t('update') %>
		</div>
	<% end %>
<% end %>
<script type="text/javascript">
jQuery('#helpdesk_ticket_status').trigger('change');
</script>