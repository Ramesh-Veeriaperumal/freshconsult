<script src="/javascripts/helpdesk/expanding_textarea.js" type="text/javascript"></script>
<script src="/javascripts/helpdesk/article_section.js" type="text/javascript"></script>
<div class="canned_response_attachment">
<% attach_id = attach_id || "admin_canned_responses_response" %>
<label><%=t('attach_files')%></label>
<div id="attachment-type" data-multifile-enable="true">
<input type="file" id="<%=attach_id%>_file" name="emptyfile" nameWhenFilled="admin_canned_responses_response[attachments][][resource]" fileContainer="<%=attach_id%>-container" fileList="<%=attach_id%>-attachments" sendFocusTo="<%=attach_id%>-body" />
<div class="info-data">
  <%= t('total') %> <%=t('attachment_help_info', :attachment_size => attachment_size)%>
</div>
<div class="attachments" id="<%=attach_id%>-container" style="display:none">
  <div id="<%=attach_id%>-attachments"></div>
</div>
</div>

<%#
  The following is a template used by multifile.js to create rows in
  the attachments table.
%>

<script id="file-list-template" type="text/x-jquery-tmpl">
  <div class="item">
    <span>
      ${name} - <a href="javascript:void(0)" onclick="Helpdesk.Multifile.remove(this);removefile(); return false;" inputId="${inputId}">remove</a>
  </span>
  </div>
</script>


<!-- triggering single file -->
<%= javascript_tag do %>
               var input = jQuery("input[fileList]");
                Helpdesk.Multifile.load()
                Helpdesk.Multifile.addEventHandler(input)
                jQuery(input.form).off("reset.Multifile")
                jQuery(input.form).on("reset.Multifile", function(){
                    Helpdesk.Multifile.resetAll(this)
                });
   function removefile(){
        if(jQuery("#admin_canned_responses_response-attachments").children().length==0)
        {
            jQuery("#admin_canned_responses_response-container").css("display","none");
        }
    }
<% end %>
</div>
