<% user_page ||= false %>

<% modal ||= false %>
<tr class="ticket-status-<%= ticket.status %> " data-ticket="<%= ticket.display_id %>">
  <td class="priority-border priority-<%=ticket.priority_key%>"></td>
  
  <% unless user_page %>
    <td class="userpic">
      <div class="hideForList">
        <%= user_avatar(ticket.requester,:thumb, "preview_pic circle") %>
      </div>
    </td>
  <% end %>
  <td class="name td-ticket-details <%= 'user-page' if user_page %>">

  <div class="ticket_subject">
    <span class="sc-item-cursor priority-border  priority-<%= ticket.priority_key%> shorcuts-info"></span>
    <h3>
      <%= link_to( h(ticket.subject) + content_tag(:span, " ##{h(ticket.display_id)}", :class => "ticket_id"), helpdesk_archive_ticket_url(ticket.display_id), "data-pjax" => "#body-container" ) %>
      
    </h3>

    <% unless ticket.requester.nil? %>
      <div class="info-data hideForList">       
        <div class="information ellipsis">
          <%= t("ticket.ticket_from", :username => requester(ticket)).html_safe %>
          <%= content_tag(:span, ticket.requester.customer.name.presence, 
                  :class => "company-name") if ticket.requester.customer.present? && !ticket.requester.agent? %>
        </div>
        <div class="emphasize">
        </div>
      </div>
    <% end %>
  </div>
  </td>
  
  <td class="source-icon hideForList">
  <div class="status-source source-detailed-<%= TicketConstants::SOURCE_TOKEN_BY_KEY[ticket.source].to_s %> hideForList" 
      title="<%= t("ticket.reported_from_source", :source => ticket.source_name.to_s.downcase) %>"
      >  </div>
  </td>
  <td class="assign hideForList">
      <ul>
        <li data-object='ticket' data-object-id="<%= ticket.display_id %>" data-type="agent"  
          data-options="#ticket_agents" >

          <label><%=t('ticket.assigned_agent')%>: </label>
        <% if ticket.freshness == :new %>
          <span class="result"><%=t('ticket.assigned_none')%></span>
        <% else %>
          <span class="result"><%=h(ticket.responder.display_name)%></span>
        <% end %>
      </li>

      <li data-object='ticket' data-object-id="<%= ticket.display_id %>" data-type="priority" data-options="#ticket_priorities">
        <label><%=t('ticket.priority')%>: </label>
        <span class="result"><%= h(ticket.priority_name) %></span>
      </li>
    </ul>
  </td>
</tr>