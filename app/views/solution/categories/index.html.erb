<% content_for :layoutType do %>community solutions<% end %>
<% content_for :sidebar do %>
	<%= content_tag :div, "", :rel => "remote", :id=> "solution-home-sidebar",
			  "data-remote-url" => '/solution/categories/sidebar' %>
<% end %>
<% content_for :sticky_left do %>
	<h3 class="lead itil-hide"><%=t('solution.title').html_safe%></h3>
<% end %>
<% content_for :sticky_right do %>
	<% if privilege?(:manage_solutions) -%>
		<div class="pull-right align-right itil-hide">
			<%= link_to t('reorder').html_safe,'#', :id => "categories_reorder_button", :class => "btn" unless(@categories.size <= 1)%>
			<%= new_solutions_button(:category) %>
		</div>
	<% end %>
<% end %>
<%= render :partial => '/solution/shared/sticky' %>

<div class="solution-list pull-left" id="categories_list">			
	<% current_categories.each do |category| %>
		<% if !@solution_drafts_feature  || !category.is_default %>
			<div class="<%= cycle('odd', 'even') %>">
				<h4 class="cat-title-border">
					<% unless category.folders.empty? %>
						<%= pjax_link_to  "#{h(category.name)}".html_safe, category %>
					<% else %>
						<%= h(category.name) %>
					<% end %>
				</h4>  
				<ul>			
		  		<% category.folders.first(5).each do |folder| %>
	  				<li>
	  					<i id="ficon-folder" class="ficon-folder"></i>
	  					<%= pjax_link_to h(folder.name),  solution_category_folder_path(category, folder)  %>
	  				  <span class="muted">
	  					  (<%= folder.articles.size %>)
	  			    </span> 
	  			  </li>
				 <% end %> 
				<% if category.folders.size > 5 %>
						<% remaining_folders = category.folders.size - 5 %>
						<li class="label-bold"><%= pjax_link_to t('solution.folders.view_all', :count => remaining_folders).html_safe,  solution_category_path(category)  %>
					  </li>
				<% end %>
				</ul>

				<%= content_tag(:span, t('solution_category.info2').html_safe, :class => "no_info_text") if (category.folders.size == 0)  %>
			</div>
		<% end %>
	<%end%>
</div>
<% if privilege?(:manage_solutions) -%>	
	<%= render :partial => "/shared/reorder_list", :locals => { :items => current_portal.portal_solution_categories,  :action_url => reorder_solution_categories_path, :title => :name, :container_id => "categories_sort", :reorder_id => "categories_reorder_button", :list_id => "categories_list"} %>
<% end %>
   