<% form_tag nil, :method => :post , :rel => "validate" do -%>
	<% @parameters.each do |arr| -%>
	<%= hidden_field_tag arr[0], arr[1] %>
	<% end -%>

	<ul class="form-horizontal map_fields">
		<li class="control-group">
			<label for="file"><%= content_tag(:b, t('step2')) %>: <%= t('import_step2_info') %></label>
		</li>

      	<% @fields.each do |key,value| -%>
			<li class="control-group  row-fluid">
				<%= render :partial => 'table_fields' , :locals => {:key => key, :value => value} %>
			</li>
		<% end -%>


		<li class="seperator control-group"></li>
			<li class="control-group">
				<p><%= content_tag(:b, t('warning')) %> <%= t('import_warning_info') %></p>
			</li>	
		</li>

	 	<div class="button-container">
		  	<%= link_to t('cancel'), contacts_path, :class => "btn"  %>
		  	<%= submit_tag t('import'), { :class => "btn btn-primary" } %>
	 	</div>
	</ul>
<% end -%>

<% javascript_tag do %>
	jQuery(document).ready(function(){
		sample_value = [<%= raw @rows[1].to_json %>];
		jQuery(".table_header").change(function(){ 
			var select_num = (this.id.match(/\[(.*?)\]/))[1];
			var table_header_val = jQuery(this).val();
			var display_text = sample_value[0][table_header_val];
			if(jQuery(this).val() == sample_value[0].length.toString() || isNaN(parseInt(table_header_val)) )
			{
				display_text = "";
			}
			jQuery(".sample_value_"+select_num).html(display_text);
		})
	});
<% end %>