<h1><%= @page_title = 'Edit Subscription' %></h1>
<legend>
  Changes made to the assigned plan or the assigned discount (or both) will override any changes made to the amount.
</legend>

<% form_for [:admin, @subscription], :html => {:class => "form-horizontal"}  do |form| %>
  <%= form.error_messages %>
  <fieldset>      
		<div class="control-group">
    	<%= form.label :amount, "", :class => "control-label" %>
			<div class="controls">
				<%= form.text_field :amount %>
			</div>
		</div>
		<div class="control-group">
			<%= form.label :name, 'Renewal date', :class => "control-label" %>
			<div class="controls">
    		<%= form.text_field :next_renewal_at %>
			</div>
		</div>
		<div class="control-group">
			<%= form.label :state, "", :class => "control-label" %>
			<div class="controls">
    		<%= form.text_field :state %>
			</div>
		</div>	
		<div class="control-group">
			<%= form.label :plan_id, 'Plan', :class => "control-label" %>
			<div class="controls">
    		<%= form.select :plan_id, SubscriptionPlan.all(:order => 'amount desc').collect {|p| [p.to_s, p.id]} %>
			</div>
		</div>
		<div class="control-group">
			<%= form.label :subscription_discount_id, 'Discount', :class => "control-label" %>
			<div class="controls">
    		<%= form.select :subscription_discount_id, SubscriptionDiscount.all(:order => 'name').collect {|d| ["#{d.name} (#{d.code}) - #{discount_label(d)}", d.id]}, :include_blank => true %>                                              
			</div>
		</div>
		<div class="control-group">
			<%= form.label :free_agents, "", :class => "control-label" %>
			<div class="controls">
    		<%= form.text_field :free_agents %>
			</div>
		</div>	
  </fieldset>  
	<div class="form-actions">
  	<%= submit_tag "Save changes", :class => "btn btn-primary" %>
		<%= link_to "Cancel", admin_subscription_path(@subscription), :class => "btn" %>
	</div>
<% end %>