<% content_for :layoutType do -%>reports_page<%- end %>
<link href="/stylesheets/ui.daterangepicker.css" media="screen" rel="stylesheet" type="text/css">

<%= include_cloudfront_css :reports %>
<%= include_cloudfront_js :reports  %>
<div class="row-fluid">
	<div class="span12 report-breadcrum-wrapper">
		<ul class="breadcrumb span8">
		  <li><a href="<%=reports_url%>"><%=t('adv_reports.glance.all_reports')%></a> <span class="divider">/</span></li>
		  <li><%=t('adv_reports.glance.report_view')%></li>
		</ul>
		<ul class="nav pull-right">
	       <li class=""><a href="#" class="proxy-generate-pdf" ><i class="reports-icon-download"></i><%=t('adv_reports.glance.download')%></a></li>
	    </ul>
	</div>
</div>
<div class="row-fluid">
	<div id="ticket-list-body-content">
		<%= render :partial => "reports/groups_analysis/group_analysis", :locals => {} %>
	</div>
	<div class="report-left-filter" id="report-filter-edit">
		<div class="left-filter">    
		  <!-- <div> <a href="#" data-dismiss="slider">close</a> </div> -->
		  <%= render :partial => "reports/shared/filter_options", :locals => {:neglect_fields => [:responder_id,:group_id,:customer_id],:current_page => 'analysis_report', :action_url => reports_group_analysis_reports_url}%>
		</div>
	</div>
</div>
<script type="text/javascript">

jQuery(document).ready(function(){
	var _groups = <%=@show_options[Reports::Constants::DEFAULT_COLUMNS_ORDER.index(:group_id)][:options].to_json%>
		if(_groups.length ==0){
			jQuery("#noticeajax").text("You don't have any groups.").show();
			jQuery("#loading-box").addClass('hide');
			jQuery('#sliding').slide();
		}
		Helpkit.AnalysisReport.init({
			report_type: 'Group',
			title:"<%=t('adv_reports.group_top_n_analysis')%>",
			date_range: jQuery("#date_range").val(),
			_url: '<%=reports_group_analysis_reports_url%>/fetch_chart_data'
		});
});

</script>
<script type="text/javascript" src="/javascripts/report/date.js"></script>
<script type="text/javascript" src="/javascripts/report/daterangepicker.jQuery.js"></script>