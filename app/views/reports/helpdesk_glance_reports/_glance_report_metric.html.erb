<div>
  <h3 class="header-lead">
    <span><%=t('adv_reports.summary')%></span>
    <a class="report-help-icon tooltip" title='<%=t("adv_reports.helptext.glance.how_to_read")%>' href="<%=@solution_artical_link%>" target="_blank">?</a>
  </h3>
  <div class="row-fluid report-summary-wrapper">
    <div class="report-summary-header">
      <ul class="inline">
        <li><h1><%= @data_obj[:received_tickets] %></h1></li>
        <li><h1><%= @data_obj[:resolved_tickets] %></h1></li>
        <li><h1><%= @data_obj[:backlog_tickets] %></h1></li>
        <li><h1><%= in_hrs_mins(@data_obj[:avgresponsetime]) %></h1></li>
        <li><h1><%= in_hrs_mins(@data_obj[:avgfirstresptime]) %></h1></li>
        <li><h1><%= in_hrs_mins(@data_obj[:avgresolutiontime]) %></h1></li>
      </ul>
    </div>
    <div class="report-summary-data">
      <ul class="inline">
        <li> 
          <% metric_obj = percentage_change(@prev_data_obj[:received_tickets].to_i,@data_obj[:received_tickets].to_i,:received_tickets)%>
          <small><span class="<%=metric_obj[:class]%>"></span><%=metric_obj[:val]%></small>
        </li>
        <li> 
          <% metric_obj = percentage_change(@prev_data_obj[:resolved_tickets].to_i,@data_obj[:resolved_tickets].to_i,:resolved_tickets)%>
          <small><span class="<%=metric_obj[:class]%>"></span><%=metric_obj[:val]%></small>
        </li>
        <li>
          <% metric_obj = percentage_change(@prev_data_obj[:backlog_tickets].to_i,@data_obj[:backlog_tickets].to_i,:backlog_tickets)%>
          <small><span class="<%=metric_obj[:class]%>"></span><%=metric_obj[:val]%></small>
        </li>
        <li>
          <% metric_obj = percentage_change(@prev_data_obj[:avgresponsetime].to_i,@data_obj[:avgresponsetime].to_i,:avgresponsetime)%>
          <small><span class="<%=metric_obj[:class]%>"></span><%=metric_obj[:val]%></small>
        </li>
        <li>
          <% metric_obj = percentage_change(@prev_data_obj[:avgfirstresptime].to_i,@data_obj[:avgfirstresptime].to_i,:avgfirstresptime)%>
          <small><span class="<%=metric_obj[:class]%>"></span><%=metric_obj[:val]%></small>
        </li>
        <li>
          <% metric_obj = percentage_change(@prev_data_obj[:avgresolutiontime].to_i,@data_obj[:avgresolutiontime].to_i,:avgresolutiontime)%>
          <small><span class="<%=metric_obj[:class]%>"></span><%=metric_obj[:val]%></small>
        </li>
      </ul>
    </div>
    <div class="report-summary-footer">
      <ul class="inline">
        <li>
          <%= link_to(content_tag(:label, t('reports.summary.received_tickets'), :class => "tooltip", :title => t("adv_reports.helptext.glance.#{@helptext_for}_recieved_tickets"), "data-placement" => "below"), helpdesk_reports_filter_path("#{@helptext_for}_received"), :target => '_blank')%>
        </li>
        <li>
          <%= link_to(content_tag(:label, t('reports.summary.resolved_tickets'), :class => "tooltip", :title => t("adv_reports.helptext.glance.#{@helptext_for}_resolved_tickets"), "data-placement" => "below"), helpdesk_reports_filter_path("#{@helptext_for}_resolved"), :target => '_blank')%>
        </li>
        <li><label class="tooltip" title='<%=t("adv_reports.helptext.glance.#{@helptext_for}_backlog_tickets")%>' data-placement="below"><%=t('adv_reports.glance.backlog_tickets')%></label></li>
        <li><label class="tooltip" title='<%=t("adv_reports.helptext.glance.#{@helptext_for}_avg_resp_time")%>' data-placement="below"><%=t('adv_reports.glance.avg_resp_time_in_hrs')%></label></li>
        <li><label class="tooltip" data-placement="below" title='<%=t("adv_reports.helptext.glance.#{@helptext_for}_avg_first_resp_time")%>'><%=t('adv_reports.glance.avg_first_resp_time_in_hrs')%></label></li>
        <li><label class="tooltip" data-placement="below" title='<%=t("adv_reports.helptext.glance.#{@helptext_for}_avg_resol_time")%>' ><%=t('adv_reports.glance.avg_resolution_time_in_hrs')%></label></li>
      </ul>
    </div>
  </div>
  <div class="row-fluid report-summary-wrapper">
    <div class="report-summary-header">
      <ul class="inline">
        <li><h1><%= (@data_obj[:avgcustomerinteractions]).to_f.round(1) %></h1></li>
        <li><h1><%= (@data_obj[:avgagentinteractions]).to_f.round(1) %></h1></li>
        <li><h1><%= @data_obj[:num_of_reopens] %></h1></li>
        <li><h1><%= @data_obj[:num_of_reassigns] %></h1></li>
        <%
        sla_perc = @data_obj[:resolved_tickets].to_i == 0 ? 0 : (@data_obj[:sla_tickets].to_f / @data_obj[:resolved_tickets].to_f)
        fcr_perc = @data_obj[:resolved_tickets].to_i == 0 ? 0 : (@data_obj[:fcr_tickets].to_f / @data_obj[:resolved_tickets].to_f)
        %>
        <li><h1><%= (sla_perc * 100).to_i %>%</h1></li>
        <li><h1><%= (fcr_perc * 100).to_i %>%</h1></li>
      </ul>
    </div>
    <div class="report-summary-data">
      <ul class="inline">
        <li> 
          <% metric_obj = percentage_change(@prev_data_obj[:avgcustomerinteractions].to_f,@data_obj[:avgcustomerinteractions].to_f,:avgcustomerinteractions)%>
          <small><span class="<%=metric_obj[:class]%>"></span><%=metric_obj[:val]%></small>
        </li>
        <li> 
           <% metric_obj = percentage_change(@prev_data_obj[:avgagentinteractions].to_i,@data_obj[:avgagentinteractions].to_i,:avgagentinteractions)%>
           <small><span class="<%=metric_obj[:class]%>"></span><%=metric_obj[:val]%></small>
        </li>
        <li>
          <% metric_obj = percentage_change(@prev_data_obj[:num_of_reopens].to_i,@data_obj[:num_of_reopens].to_i,:num_of_reopens)%>
          <small><span class="<%=metric_obj[:class]%>"></span><%=metric_obj[:val]%></small>
        </li>
        <li>
          <% metric_obj = percentage_change(@prev_data_obj[:num_of_reassigns].to_i,@data_obj[:num_of_reassigns].to_i,:num_of_reassigns)%>
          <small><span class="<%=metric_obj[:class]%>"></span><%=metric_obj[:val]%></small>
        </li>
        <li>
          <% 
          prev_sla_perc = @prev_data_obj[:resolved_tickets].to_i == 0 ? 0 : (@prev_data_obj[:sla_tickets].to_f / @prev_data_obj[:resolved_tickets].to_f)
          metric_obj = percentage_change(prev_sla_perc,sla_perc,:sla_tickets)%>
          <small><span class="<%=metric_obj[:class]%>"></span><%=metric_obj[:val]%></small>
        </li>
        <li>
          <% 
          prev_fcr_perc = @prev_data_obj[:resolved_tickets].to_i == 0 ? 0 : (@prev_data_obj[:fcr_tickets].to_f / @prev_data_obj[:resolved_tickets].to_f)
          metric_obj = percentage_change(prev_fcr_perc,fcr_perc,:fcr_tickets)%>
          <small><span class="<%=metric_obj[:class]%>"></span><%=metric_obj[:val]%></small>
        </li>
      </ul>
    </div>
    <div class="report-summary-footer">
      <ul class="inline">
        <li><label class="tooltip" title='<%=t("adv_reports.helptext.glance.#{@helptext_for}_avg_cust_inter")%>' data-placement="below"><%=t('adv_reports.glance.avg_cust_intr')%></label> </li>
        <li><label class="tooltip" title='<%=t("adv_reports.helptext.glance.#{@helptext_for}_avg_agent_inter")%>' data-placement="below"><%=t('adv_reports.glance.avg_agent_intr')%></label> </li>
        <li><label class="tooltip" title='<%=t("adv_reports.helptext.glance.#{@helptext_for}_reopens")%>' data-placement="below"><%=t('adv_reports.glance.num_of_reopens')%></label> </li>
        <li><label class="tooltip" title='<%=t("adv_reports.helptext.glance.#{@helptext_for}_reassigns")%>' data-placement="below"><%=t('adv_reports.glance.num_of_reassigns')%></label> </li>
        <li><label class="tooltip" title='<%=t("adv_reports.helptext.glance.#{@helptext_for}_sla")%>' data-placement="below"><%=t('adv_reports.glance.sla_percentage')%></label> </li>
        <li><label class="tooltip" title='<%=t("adv_reports.helptext.glance.#{@helptext_for}_fcr")%>' data-placement="below"><%=t('reports.summary_report.fcr_percent')%></label> </li>
      </ul>
    </div>
  </div>
</div>