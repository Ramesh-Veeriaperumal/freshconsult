<div class="sidepanel">
  <% form_remote_tag(:url => '/gamification/reports/generate', :update => "report-container", 
	                   :loading => "jQuery('#report-container').html('<div class=\"loading-box\"></div>');  ") do %>

	<div>
		<label class="caption"><%= t('reports.select_time_period')%></label>
		<%= text_field_tag :date_range, "", :class => "required" %>
	</div>                   
	<%= submit_tag t('reports.generate_button'), :class => "uiButton" %>
	<% end %>
</div>

<% javascript_tag do %>
jQuery(document).ready(function() {
	jQuery("#date_range").daterangepicker({
		earliestDate: Date.parse('1/1/2010'),
		latestDate: new Date(),
		presetRanges: [
			{text: '<%= t('reports.date_ranges.last_7_days') %>', dateStart: 'Today-8', dateEnd: 'Today-1' },
			{text: '<%= t('reports.date_ranges.last_30_days') %>',dateStart: 'Today-31', dateEnd: 'Today-1'},
			{text: '<%= t('reports.date_ranges.last_90_days') %>',dateStart: 'Today-91',  dateEnd: 'Today-1'}
		],
		presets: {
			dateRange: '<%= t('reports.date_ranges.custom') %>'
		},
		dateFormat: 'dd MM yy',
		closeOnSelect: true
	});
	jQuery("#date_range").val('<%= 30.days.ago.strftime("%d %B %Y") %> - <%= Time.now.strftime("%d %B %Y") %>');   
});     
<% end %>
