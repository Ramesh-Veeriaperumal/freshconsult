<div class="row-fluid volume-header">
	<div class="span5 chart-title">
		<span class="trend-subtitle" data-title="trend"></span>
		<%=t('helpdesk_reports.ticket_volume.time_trends.title').html_safe %>
	</div>
	<div class="span7 trend-type" id="trend_type">
		<div class="btn-group">
			<span class="btn" data-format="doy" data-trend='trend-type'>
				<%=t('helpdesk_reports.ticket_volume.time_trends.day') %>
			</span>
			<span class="btn" data-format="w" data-trend='trend-type'>
				<%=t('helpdesk_reports.ticket_volume.time_trends.week') %>
			</span>
			<span class="btn" data-format="mon" data-trend='trend-type'>
				<%=t('helpdesk_reports.ticket_volume.time_trends.month') %>
			</span>
			<span class="btn" data-format="qtr" data-trend='trend-type'>
				<%=t('helpdesk_reports.ticket_volume.time_trends.qtr') %>
			</span>
			<span class="btn" data-format="y" data-trend='trend-type'>
				<%=t('helpdesk_reports.ticket_volume.time_trends.year') %>
			</span>
		</div>
	</div>
</div>

<div class="charts_container" id="time_trend_chart"></div>

<div class='comparision-chart-title'>
	<%=t('helpdesk_reports.ticket_volume.day_trend.title').html_safe %>
</div>
<div class="comparision-chart-subtitle">
	<%=t('helpdesk_reports.ticket_volume.day_trend.subtitle').html_safe %>
</div>
<div class="charts_container">
	<div class="mini-chart-wrapper clearfix" id="mini_chart_wrapper"></div>
	<div id="day_trend_chart"></div>
</div>


<script type="text/javascript">
	jQuery(document).ready(function () {
		var err = <%= @filter_err ? @filter_err.to_json.html_safe : false %>;
	    var locals = HelpdeskReports.locals;
	    locals.chart_hash = <%= @data.to_json.html_safe %> ;
	    if (err) {
            var div = ['day_trend_chart', 'time_trend_chart'];
            HelpdeskReports.CoreUtil.populateEmptyChart(div, err);
	        jQuery('#trend_type, #mini_chart_wrapper').hide();
	    } else if (!jQuery.isEmptyObject(locals.chart_hash["error"]) || !jQuery.isEmptyObject(locals.chart_hash[locals.metric]["error"])) {
	        var div = ['day_trend_chart', 'time_trend_chart'];
	        var msg = 'Something went wrong, please try again';
            HelpdeskReports.CoreUtil.populateEmptyChart(div, msg);
	        jQuery('#trend_type, #mini_chart_wrapper').hide();
	    } else if (jQuery.isEmptyObject(locals.chart_hash[locals.metric])) {
	    	var div = ['day_trend_chart', 'time_trend_chart'];
	        var msg = 'No data to display';
            HelpdeskReports.CoreUtil.populateEmptyChart(div, msg);
	        jQuery('#trend_type, #mini_chart_wrapper').hide();
	    } else if (!jQuery.isEmptyObject(locals.chart_hash[locals.metric]) && jQuery.isEmptyObject(locals.chart_hash[locals.metric]["error"])) {
	        HelpdeskReports.ChartsInitializer.TicketVolume.init(locals.chart_hash);
	    } 
	});
</script>