<label class="control-label"><%= t('reports.select_time_period').html_safe%></label>
<%= text_field_tag :date_range, date_range, :class => "required input-large" %>

<%= javascript_tag do %>
jQuery(document).ready(function() {
	var dateFormat = getDateFormat('mediumDate').toUpperCase();
	var date = Helpkit.commonSavedReportUtil.getDateRangeDefinition(dateFormat);
	jQuery("#date_range").daterangepicker({
		earliestDate: Date.parse('01/01/2010'),
		latestDate: new Date(),
		presetRanges: [
    			{	text: '<%= t('helpdesk_reports.today') %>', 
    				dateStart: 'Today', 
    				dateEnd: 'Today',
    				period : 'today'
    			},
    	    {	text: '<%= t('helpdesk_reports.yesterday') %>', 
    	    	dateStart: 'Today-1', 
    	    	dateEnd: 'Today-1',
    	    	period : 'yesterday' 
    	    },
      		{	text: '<%= t('helpdesk_reports.this_week') %>', 
      			dateStart: date.this_week_start, 
      			dateEnd: date.endDate ,
      			period : "this_week" 
      		},
      		{	text: '<%= t('helpdesk_reports.previous_week') %>', 
      			dateStart: date.previous_week_start, 
      			dateEnd: date.previous_week_end ,
      			period : "previous_week" 
      		},
      		{	text: '<%= t('helpdesk_reports.last_num_days', num: 7) %>', 
      			dateStart: 'Today-6', 
      			dateEnd: 'Today' ,
      			period : "last_7"
      		},
      		{ text: '<%= t('helpdesk_reports.this_month') %>',
            dateStart: date.this_month_start,
            dateEnd: 'Today',
            period : "this_month"
          },
          { text: '<%= t('helpdesk_reports.previous_month') %>',
            dateStart: date.previous_month_start,
            dateEnd: date.previous_month_end,
            period : "previous_month"
          },
	  		  {	text: '<%= t('helpdesk_reports.last_num_days',num: 30) %>',
    			 	dateStart: 'Today-29', 
    				dateEnd: 'Today',
    				period : "last_30"
        	},
      		{
            text: "<%= t('helpdesk_reports.last_num_months', :num => 3 ) %>",
            dateStart: date.last_3_months,
            dateEnd: 'Today',
            period : "last_3_months"
          },
      		{	
            text: '<%= t('helpdesk_reports.last_num_days', num: 90) %>',
  				  dateStart: 'Today-89',  
  				  dateEnd: 'Today',
  				  period : "last_90"
      		},
      		{
            text: "<%= t('helpdesk_reports.last_num_months', :num => 6) %>",
            dateStart: date.last_6_months,
            dateEnd: 'Today',
            period : "last_6_months"
          },
          {
            text: "<%= t('helpdesk_reports.this_year') %>",
            dateStart: date.this_year_start,
            dateEnd: 'Today',
            period : "this_year"
          }
		],
		presets: {
			dateRange: '<%= t('helpdesk_reports.date_range') %>'
		},
		dateFormat: getDateFormat('datepicker'),
		closeOnSelect: true,
		onClose: function() {
			trigger_event("filter_changed",{});
			jQuery('#date_range').trigger('change');
		},
        presetRangesCallback : true
	});

	jQuery('#date_range').bind('keypress keyup keydown', function(ev) {
		ev.preventDefault();
		return false;
	});
});
<% end %>