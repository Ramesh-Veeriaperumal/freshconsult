<div class="row-fluid business_hours">
	<ul class="unstyled">
		<li class="row-fluid"><h4 class="sub-lead"><%=t('business_hours.helpdesk_hours')%></h4></li>
		<li class="row-fluid">
			<div class="span3">
				Helpdesk Time Zone
			</div>
			<div class="span9">
				<select class="select2" >
					<option value="1:00">GMT (1:00) Chennai</option>
					<option value="1:30">GMT (2:30) Chennai</option>
					<option value="8:00" selected="selected">GMT (5:30) Chennai</option>
				</select>
			</div>
		</li>
		<li class="row-fluid">
			<ul class="unstyled">
				<li class="span3">
					Helpdesk Hours
				</li>
				<li class="span9">
					<div>
						<label class="radio">
							<%= f.radio_button :fullweek, true %>
					  		<%=t('business_hours.info6')%>
						</label>
					</div>
					<div>
						<label class="radio">
						  	<%= f.radio_button :fullweek, false %> 
						  	<%=t('business_hours.info3')%>
						</label>
						<ul class="unstyled working-days row-fluid" id="DAYS_LIST">
							<% weekdays = @business_calendar.business_hour_data[:weekdays] %>
							<% weekday_human_list = [ "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday" ] %>
							<% weekday_human_list.each_with_index do |days, days_index| %>
							<li class="timerange row-fluid">
								<div class="span3">
									<label class="business_days">
										<% cal_index = ( days_index+1 != 7 ) ? (days_index+1) : 0 %>
										<% checked = weekdays.include?(cal_index) %>
										<% if checked %>
											<% beginning_of_workday = @business_calendar.business_hour_data[:working_hours][cal_index][:beginning_of_workday].split(" ")[0] %>
											<% beginning_of_workday_range = @business_calendar.business_hour_data[:working_hours][cal_index][:beginning_of_workday].split(" ")[1] %>
											<% end_of_workday = @business_calendar.business_hour_data[:working_hours][cal_index][:end_of_workday].split(" ")[0] %>
											<% end_of_workday_range = @business_calendar.business_hour_data[:working_hours][cal_index][:end_of_workday].split(" ")[1] %>
											<% if (end_of_workday.eql?("11:59:59") and beginning_of_workday.eql?("00:00:00")) %>
												<% end_of_workday = beginning_of_workday = "12:00" %>
												<% end_of_workday_range = beginning_of_workday_range = "am" %>
											<% end %>
										<%else%>
											<% beginning_of_workday="8:00" %>
											<% beginning_of_workday_range = "am" %>
											<% end_of_workday ="5:00" %>
											<% end_of_workday_range = "pm" %>
										<%end%>
										<%= check_box_tag ( weekday_human_list[days_index], cal_index, checked, :class => "checked")  %>
										<%= days %>
									</label>
								</div>
								<div class="span9">
									<%= select "time", "morning_#{cal_index.to_s}", BusinessCalendar::TIME_LIST, 
											{ :selected=> beginning_of_workday }, { :class => "morning_time", :id => "time_morning" } %>
									<%= select "morning", "range_#{cal_index.to_s}", %w[am pm], 
											{ :selected => beginning_of_workday_range }, { :class => "morning_time", :id => "morning_range" } %>
									<span><%= t('business_hours.to') %></span>
									<%= select "time","evening_#{cal_index.to_s}", BusinessCalendar::TIME_LIST, 
											{ :selected => end_of_workday}, { :class => "evening_time", :id => "time_evening" } %> 
									<%= select "evening", "range_#{cal_index.to_s}", %w[am pm], 
											{ :selected => end_of_workday_range }, { :class => "evening_time time_validate", :id => "evening_range"  } %>
									
									<label id="duration"></label>	
									<%= hidden_field_tag "business_time_data[working_hours][#{cal_index.to_s}][beginning_of_workday]", "",
										:class => "db_start_time_data" %>
									<%= hidden_field_tag "business_time_data[working_hours][#{cal_index.to_s}][end_of_workday]", "",
										:class => "db_end_time_data" %>
								</div>
							</li>
							<%end%>
							<%= f.hidden_field :weekdays, :id => "weekdays" %>	
						</ul>
					</div>
				</li>
			</ul>
		</li>
		<li class="row-fluid">
			<h4 class="sub-lead"><%=  t('business_hours.holiday_list') %> </h4>
			<div class="muted"><%=t('business_hours.info5')%></div>
		</li>
		<li class="row-fluid">
			<div class="row-fluid">
				<div class="holidaylist-head span12">
					<span class="span2 date-selection">
						<%= date_select("holiday", "date", { :order => [:month, :day], :use_short_month => true } ) %>
					</span>
					<span class="span5">
						<label class="overlabel" for="holiday_name"><%=t('business_hours.holiday_name')%></label>
						<%= text_field("holiday", "name") %>
						<b class="text_red" id="HolidayValidation" style="display:none;"> <%=t('business_hours.holiday_added')%> </b>
					</span>
					<span class="span3">
						<%= link_to_function( t('add_holiday'), "addHoliday()", :class => "btn btn-primary" ) %>
					</span>
					<span class="span2 import-link">
						<a href="#importholiday" title="Import Holiday" data-submit-label="Import" rel="freshdialog" data-width="400">Import Holiday</a>
					</span>
				</div>
			</div>
			<div id="importholiday" class="row-fluid hide">
				<select class="select2 span12" >
					<option value="1:00">GMT (1:00) Chennai</option>
					<option value="1:30">GMT (2:30) Chennai</option>
					<option value="8:00" selected="selected">GMT (5:30) Chennai</option>
				</select>
				<p>
					<b>Important:</b> Importing will only import current year's holiday.we will not updating the holiday list every year.
				</p>

			</div>
			<div class="holidaylist row-fluid">
				<%= f.hidden_field :holiday_data, :id=>"holiday_data" %>
				<ul class="unstyled hide" id="HolidayList"></ul>
				<% content_for :pagefixed do %>
					<% javascript_tag do %>
						<% @business_calendar.holiday_data.each do |holiday| %>
							addHolidaytoList("<%=holiday[0]%>", "<%=h(holiday[1])%>");
						<% end %>	
					<% end %>
				<% end %>
			</div>
		</li>
	</ul>
</div>
	<div class="button-container">
		<%= link_to "#{t('account.cancel')}", "/admin/home", :class => "btn floatl" %>
		<%= f.submit t('save'), :class => "btn btn-primary" %>
	</div>