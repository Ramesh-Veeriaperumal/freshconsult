<% content_for :sidebar do -%><%- end %>
<%= include_stylesheets :codemirror %>
<%= include_javascripts :codemirror %>

<h2 class="title">Advance portal rebranding</h2>
<h3 class="sub-title">Customize your support portal</h3>
<br />
<div class="clearfix">
  <ul data-tabs="tabs" class="tabs">
    <li>
      <a href="#template" data-toggle="tab">Page elements</a>
    </li>
    <li class="active">
      <a id="custom-css-tab" href="#custom-css" code-refresh-id="portal_template_custom_css">Custom stylesheet</a>
    </li>
    <li>
      <a id="layout-tab" href="#layout" code-refresh-id="portal_template_layout">Page layout</a>    
    </li>   
    <li>                       
      <a href="#pages">Portal pages</a>   
    </li>       
  </ul>        
  <% content_for :onload_script do %>
    jQuery("#custom-css-tab, #layout-tab").bind("click", function(){
      setTimeout("window.code_mirrors['" + this.getAttribute('code-refresh-id') + "'].refresh()", 100);
    });
  <% end %>
    <div class="tab-content">
    	<div class="tab-pane" id="template">
        <% form_for [:admin, @portal_template], :url => { :action => :update }, :html => { :method => :put } do |f| -%>
          <label>Header</label>  
          <p class="help-text">Change the header area of your support portal</p>
          <%= f.code_editor :header, :height => "150px" %>          
          <br />
          <label>Contact Information</label>        
          <p class="help-text">Add contact information like phone no. or email. This information will come in the side bar of your support portal</p>
          <%= f.code_editor :contact_info, :height => "80px" %>
          <br />
        	<label>Footer</label>
        	<p class="help-text">Change the footer area of your support portal</p>	
        	<%= f.code_editor :footer, :height => "80px" %>
          <br />
          <div class="well">
            <%= submit_tag "Preview", :name => 'preview_button', :class => "btn primary floatr", :target => "_blank", :disable_with => "Please wait..." %>
            <%= submit_tag "Save changes", :class => "btn", :disable_with => "Please wait..." %>
          </div>
        <% end -%>
    	</div>
      

    	<div class="tab-pane active" id="custom-css">		
        <% form_for [:admin, @portal_template], :url => { :action => :update }, :html => { :method => :put } do |f| -%>
      	<label>Custom stylesheet</label>   
      	<p class="help-text">Add or overwrite freshdesk default styles with your own custom css</p>

      	<%= f.code_editor :custom_css, :value => @default_custom_css, :mode => "css" %>            
        <br />
          <div class="well">
            <%= submit_tag "Preview", :name => 'preview_button', :class => "btn primary floatr", :target => "_blank", :disable_with => "Please wait..." %>
            <%= submit_tag "Save changes", :class => "btn", :disable_with => "Please wait..." %>
          </div>
        <% end -%>
    	</div>
  	     
    	<div class="tab-pane" id="layout">
        <% form_for [:admin, @portal_template], :url => { :action => :update }, :html => { :method => :put } do |f| -%>
      	<label>Page layout</label>
      	<p class="help-text">Customize the entire layout of your support portal</p>	
      	<%= f.code_editor :layout %>  
        <br />
          <div class="well">
            <%= submit_tag "Preview", :name => 'preview_button', :class => "btn primary floatr", :target => "_blank", :disable_with => "Please wait..." %>
            <%= submit_tag "Save changes", :class => "btn", :disable_with => "Please wait..." %>
          </div>     
        <% end %>
    	</div>
      
  
	<div class="tab-pane" id="pages">
    <div class="row-fluid">
      <div class="span3">
        <%= render :partial => "portal_pages", :object => @portal_pages %>
      </div>
      <div class="span9">
        <div id="Customizepage"></div>
      </div>
    </div>
  </div>
</div>