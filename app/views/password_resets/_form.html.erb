<%= form_for @user, :url => password_reset_path, :method => :put, :html => { :rel => "validate", :class => "form-portal"} do |f| %>
	<%= f.error_messages %>
	<fieldset>
		<div class="control-group">
			<label class="control-label required"><%= t('create_password') %></label>
			<div class="controls">
				<input class="special span6 password popover-enabled required" id="password" name="user[password]" type="password"
					data-content="<%= password_policies_for_popover %>" autocomplete="off">
			</div>
		</div>
		<div class="control-group">
			<label class="control-label required"><%= t('retype_password') %></label>
			<div class="controls">
				<input class="special span6 password_confirmation required" id="password_confirmation"name="user[password_confirmation]" type="password" autocomplete="off">
			</div>
		</div>		  	
		<div class="form-actions">
			<button type="submit" class="btn btn-primary"> <%= t('update_and_log_in') %> </button>
		</div>	
	</fieldset>
<% end %>

<%= javascript_tag do %>
jQuery(document).ready(function() { 
  var mediaQcheck = window.matchMedia( "(max-device-width: 480px)" );
  var $placement = (jQuery("html").attr("dir") == "rtl") ? 'left' :'right';
  if(mediaQcheck.matches){
    $placement = 'top';
  }

  var popover_message = jQuery('#password').data('content');
  if(popover_message){
    jQuery("#password").popover({
      html: true,
      trigger: 'manual', 
      placement: $placement,
      reloadContent: false,
      template: "<div class='arrow'></div><div class='inner'><div class='content'><p></p></div></div>",
      content: function(){
                return "<div class='password-wrapper'><h5 class='policy-title'><%= t("admin.security.password_policy_popover.password_should") %></h5>" +jQuery("#password").attr("data-content") + "</div>"
              }
    }).focus(function(){
        jQuery(this).popover("show");
    }).blur(function(){
        jQuery(this).popover("hide");
    }); 
  }
});
 	
<% end %>
