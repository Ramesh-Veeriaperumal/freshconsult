<%= form_for @user, :url => activate_path(@user.perishable_token), :html => { :rel => "validate", :class => "form-portal" } do |form| %>
	<%= error_messages_for :user %>
	<fieldset>
	  	<div class="control-group">
			<%= form.label :name, t('user.full_name'), :class => "control-label required" %>
			<div class="controls">
				<%= form.text_field :name, :class => "required special span6" %>
			</div>
		</div>
		<div class="control-group">
			<%= form.label :password, t('create_password'), :class => "control-label required" %>
			<div class="controls">
				<%= form.password_field :password, :class => "required special password span6 popover-enabled",
						:data => {:content => password_policies_for_popover} %>
			</div>
		</div>
		<div class="control-group">
			<%= form.label :password_confirmation, t('retype_password'), :class => "control-label required" %>
			<div class="controls">
				<%= form.password_field :password_confirmation, :class => "required special password span6"  %>
			</div>
		</div>
		<div class="form-actions">
			<button type="submit" class="btn btn-primary"> <%= t('activate_and_log_in') %> </button>
	  	</div>	
	</fieldset>
<% end %>

<%= javascript_tag do %>
 	(function($){
 	var mediaQcheck = window.matchMedia( "(max-device-width: 480px)" );
 		var $placement = ($("html").attr("dir") == "rtl") ? 'left' :'right';
		$("input.popover-enabled").focus(function(){
		  var popover_message= $(this).attr("data-content");

					if (mediaQcheck.matches) {
					    if(popover_message){
					    $(this).popover({
			  	   		  html: true,
			  	   		  trigger: 'manual',
			  	   		   placement: 'top',
			  	   		  template: '<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div></div></div>',
			  	   		  content:function(){
			                  return "<div class='password-wrapper'><h5 class='policy-title'><%= t("admin.security.password_policy_popover.password_must") %></h5>" 
			                  	+popover_message + "</div>"
			                }
			  	   	    }).popover("show");
			  	   	}} 
					else {
					  if(popover_message){
					    $(this).popover({
			  	   		  html: true,
			  	   		  trigger: 'manual',
			  	   		   placement: $placement,
			  	   		  template: '<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div></div></div>',
			  	   		  content:function(){
			                  return "<div class='password-wrapper'><h5 class='policy-title'><%= t("admin.security.password_policy_popover.password_must") %></h5>" 
			                  	+popover_message + "</div>"
			                }
			  	   	    }).popover("show");
			  	   	}}
		});	
		$(".popover-enabled").blur(function(){
	  	  $(this).popover("hide");
		});
	
	})(jQuery);

<% end %>