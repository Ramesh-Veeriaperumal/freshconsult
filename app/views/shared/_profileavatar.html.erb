<% javascript_tag do %>
	function changeProfilePic(){
		jQuery('#AvatarPic').toggle();
		jQuery('#AvatarInput').toggle();
	}

	deletePic = function() {
	    jQuery("#AvatarControls").remove();
		jQuery('#AvatarPic').remove();
		jQuery('#AvatarInput').show();
	}

<% end %>

<%#= label(:user, :photo, t('user.photo')) %>
<% if(type == "edit" &&  user.avatar) %>
	<div class="profile_pic" id="AvatarPic">
		<%= image_tag user.avatar.expiring_url(:medium), :alt => user.name,
									:onerror => "imgerror(this)" %>
	</div>
	<div id="AvatarInput" style="display:none;">
		<% fields_for "user[avatar_attributes]", user.avatar do |avatar_form| %>
			<div class="info-data"><%=t('user.info1')%></div>
			  <%= avatar_form.file_field :content, :size => 10 , :class => 'upload_size_validity validate_image', :accept => 'image/*'   %>
		<% end %>
	</div>
	<div id="AvatarControls" class="avatar-controls">
		<%= link_to_function("Change Photo", "changeProfilePic()") %>
		<%#= link_to_remote('Delete',
				:url => { :action => "delete_avatar", :id => user.id },
				:success => "deletePic()",
				:confirm => 'Are you sure you want to delete this Profile Photo',
				:method => 'delete',
				:html => { :class => "button" }) %>
	</div>
	<br />
<% else %>
	<% fields_for "user[avatar_attributes]", user.avatar do |avatar_form| %>
		<div class="info-data"><%=t('user.info1')%></div>
		  <%= avatar_form.file_field :content, :size => 10, :class => 'upload_size_validity validate_image', :accept => 'image/*' %>
	<% end %>
<% end %>
