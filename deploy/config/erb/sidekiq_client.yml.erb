# sidekiq settings
# see: https://github.com/mperham/sidekiq/blob/master/examples/config.yml
defaults: &defaults
  :verbose: <%= @verbose %>
  :concurrency: <%= @concurrency %>
  <% if node[:opsworks][:instance][:hostname].include?("sidekiq-select-all-") %>
  :redis_pool_size: <%= @redis_pool_size %>
  <% else %>
  :redis_pool_size: <%= @concurrency + 2 %>
  <% end %>
  :logfile: <%= @logfile%>
  :pidfile: <%= @pidfile %>
  :timeout: 30
  :queues:
    <% @queues.each do |q| %>
      - [<%= q %>]
    <% end %>

<%=@environment%>:
  <<: *defaults


