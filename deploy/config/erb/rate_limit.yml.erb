defaults: &defaults
 host: <%= node[:ymls][:redis_rate_limit][:host] %>
 port: <%= node[:ymls][:redis_rate_limit][:port] %>
 <% if node[:ymls][:redis_rate_limit][:password] %>
 password: <%= node[:ymls][:redis_rate_limit][:password] %>
 <% end %>
 <% if node[:ymls][:redis_rate_limit][:retry_password] %>
 retry_password: <%= node[:ymls][:redis_rate_limit][:retry_password] %>
 <% end %>
 <% if node[:ymls][:redis_rate_limit][:retry_port] %>
 retry_port: <%= node[:ymls][:redis_rate_limit][:retry_port] %>
 <% end %>
 <% if node[:ymls][:redis_rate_limit][:retry_host] %>
 retry_host: <%= node[:ymls][:redis_rate_limit][:retry_host] %>
 <% end %>
 timeout: <%= node[:ymls][:redis_rate_limit][:timeout] %>
 <% if node[:ymls][:redis_rate_limit][:connect_timeout] %>
 connect_timeout: <%= node[:ymls][:redis_rate_limit][:connect_timeout] %>
 <% end %>
 keepalive: <%= node[:ymls][:redis_rate_limit][:keepalive] %>
<%= node[:opsworks][:environment] %>:
  <<: *defaults
 
slave:
  <<: *defaults