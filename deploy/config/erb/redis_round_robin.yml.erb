defaults: &defaults
 host: <%= node[:ymls][:redis_round_robin][:host] %>
 port: <%= node[:ymls][:redis_round_robin][:port] %>
 <% if node[:ymls][:redis_round_robin][:password] %>
 password: <%= node[:ymls][:redis_round_robin][:password] %>
 <% end %>
 <% if node[:ymls][:redis_round_robin][:retry_password] %>
 retry_password: <%= node[:ymls][:redis_round_robin][:retry_password] %>
 <% end %>
 <% if node[:ymls][:redis_round_robin][:retry_port] %>
 retry_port: <%= node[:ymls][:redis_round_robin][:retry_port] %>
 <% end %>
 <% if node[:ymls][:redis_round_robin][:retry_host] %>
 retry_host: <%= node[:ymls][:redis_round_robin][:retry_host] %>
 <% end %>
 timeout: <%= node[:ymls][:redis_round_robin][:timeout] %>
 <% if node[:ymls][:redis_round_robin][:connect_timeout] %>
 connect_timeout: <%= node[:ymls][:redis_round_robin][:connect_timeout] %>
 <% end %>
 keepalive: <%= node[:ymls][:redis_round_robin][:keepalive] %>
<%= node[:opsworks][:environment] %>:
  <<: *defaults
 
slave:
  <<: *defaults