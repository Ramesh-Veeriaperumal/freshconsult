defaults: &defaults
 host: <%= node[:ymls][:redis_routes][:host] %>
 port: <%= node[:ymls][:redis_routes][:port] %>
 <% if node[:ymls][:redis_routes][:password] %>
 password: <%= node[:ymls][:redis_routes][:password] %>
 <% end %>
 <% if node[:ymls][:redis_routes][:retry_password] %>
 retry_password: <%= node[:ymls][:redis_routes][:retry_password] %>
 <% end %>
 <% if node[:ymls][:redis_routes][:retry_port] %>
 retry_port: <%= node[:ymls][:redis_routes][:retry_port] %>
 <% end %>
 <% if node[:ymls][:redis_routes][:retry_host] %>
 retry_host: <%= node[:ymls][:redis_routes][:retry_host] %>
 <% end %>
 timeout: <%= node[:ymls][:redis_routes][:timeout] %>
 <% if node[:ymls][:redis_routes][:connect_timeout] %>
 connect_timeout: <%= node[:ymls][:redis_routes][:connect_timeout] %>
 <% end %>
 keepalive: <%= node[:ymls][:redis_routes][:keepalive] %>
<%= node[:opsworks][:environment] %>:
  <<: *defaults

slave:
  <<: *defaults
